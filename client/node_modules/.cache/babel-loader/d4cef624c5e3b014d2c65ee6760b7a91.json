{"ast":null,"code":"import _regeneratorRuntime from\"/Users/michaelschroeder/Documents/GitHub/final-project-symphony-quadtuplets/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/michaelschroeder/Documents/GitHub/final-project-symphony-quadtuplets/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/michaelschroeder/Documents/GitHub/final-project-symphony-quadtuplets/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// 3rd party library imports\nimport React,{useEffect}from'react';import{useLocation}from'react-router-dom';import*as Tone from'tone';import{Music32}from'@carbon/icons-react';import Popup from'reactjs-popup';// project imports\nimport{InstrumentContainer}from'./Instruments';import{DispatchAction}from'./Reducer';import{SideNav}from'./SideNav';import{VisualizerContainer}from'./Visualizers';import\"./css/recording_popup.css\";import{addSong}from'./utils/apiCreators';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";/** ------------------------------------------------------------------------ **\n * Instrument and visualizer component\n ** ------------------------------------------------------------------------ */function InstrumentPanel(_ref){var state=_ref.state,dispatch=_ref.dispatch;/**\n   * This React component is the top-level for the instrument.\n   */var instrument=state.get('instrument');return/*#__PURE__*/_jsx(\"div\",{children:instrument&&/*#__PURE__*/_jsx(InstrumentContainer,{state:state,dispatch:dispatch,instrument:instrument})});}function VisualizerPanel(_ref2){var state=_ref2.state;/**\n   * This React component is the top-level for the visualizer.\n   */var visualizer=state.get('visualizer');return/*#__PURE__*/_jsx(\"div\",{children:visualizer&&/*#__PURE__*/_jsx(VisualizerContainer,{visualizer:visualizer},visualizer.name)});}function InstrumentAndVisualizer(_ref3){var state=_ref3.state,dispatch=_ref3.dispatch;/**\n   * This React component bundles the instrument panel and visualizer panel together.\n   */return/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 bottom-0 top-0 flex flex-column\",style:{left:'16rem'},children:[/*#__PURE__*/_jsx(InstrumentPanel,{state:state,dispatch:dispatch}),/*#__PURE__*/_jsx(VisualizerPanel,{state:state,dispatch:dispatch}),/*#__PURE__*/_jsx(RecordingPopup,{state:state,dispatch:dispatch})]});}function RecordingPopup(_ref4){var state=_ref4.state,dispatch=_ref4.dispatch;/**\n   * This React component will be displayed after a song has been finished recording.\n   */var openPopup=state.get('openPopup');var closeModal=function closeModal(){return dispatch(new DispatchAction('TRIGGER_RECORDING_POPUP',{openPopup:openPopup}));};return/*#__PURE__*/_jsx(Popup,{open:openPopup,closeOnDocumentClick:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close close-modal\",onClick:closeModal,children:\"\\xD7\"}),/*#__PURE__*/_jsx(RecordingForm,{state:state,dispatch:dispatch})]})});}function RecordingForm(_ref5){var state=_ref5.state,dispatch=_ref5.dispatch;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),submitting=_React$useState2[0],setSubmitting=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),submitted=_React$useState4[0],setSubmitted=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),input=_React$useState6[0],setInput=_React$useState6[1];var handleSubmit=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setSubmitting(true);// submit value entered into form input to state to finalize creation of song \n_context.next=4;return addSong(dispatch,input,state.get('song'));case 4:setTimeout(function(){setSubmitting(false);setSubmitted(true);setTimeout(function(){setSubmitted(false);setInput('');},3000);},3000);case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref6.apply(this,arguments);};}();var handleInputChange=function handleInputChange(e){return setInput(e.target.value);};return/*#__PURE__*/_jsxs(\"form\",{className:\"recording-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"fieldset\",{className:\"form-fieldset\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"form-fieldset-label\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\" You're almost done! \"}),/*#__PURE__*/_jsx(\"p\",{children:\" As a last step, enter a title for your song recording. \"}),/*#__PURE__*/_jsx(\"input\",{value:input,onChange:handleInputChange,placeholder:\"Enter a song title\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"form-button\",type:\"submit\",children:\" Submit \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-submission-message\",children:[submitting&&/*#__PURE__*/_jsx(\"p\",{children:\" Submitting form... \"}),submitted&&/*#__PURE__*/_jsx(\"p\",{children:\" Your song has been submitted! \"})]})]});}function ShowWelcome(){return/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-0 bottom-0 top-0 flex flex-column items-center justify-center\",style:{left:'16rem'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"mw6 lh-copy mb4\",children:[/*#__PURE__*/_jsx(Music32,{}),/*#__PURE__*/_jsx(\"div\",{className:\"f3 fw7 mb2\",children:\"Welcome to the case study.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"f4 mb3\",children:\"Select an instrument and a visualizer on the left to serve some fresh beats.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"f5\",children:\"The UI is yours to design. Express yourself.\"})]})});}/** ------------------------------------------------------------------------ **\n * Main page component\n ** ------------------------------------------------------------------------ */export function MainPage(_ref7){var state=_ref7.state,dispatch=_ref7.dispatch;/**\n   * This React component bundles together the entire main page.\n   */var location=useLocation();var isWelcome=!state.get('instrument');console.log('INSTRUMENT',isWelcome);useEffect(function(){dispatch(new DispatchAction('SET_LOCATION',{location:location}));},[dispatch,location]);return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed top-0 left-0 h-100 w-100 bg-white\",onClick:function onClick(){return Tone.start();},children:[/*#__PURE__*/_jsx(SideNav,{state:state,dispatch:dispatch}),isWelcome?/*#__PURE__*/_jsx(ShowWelcome,{}):/*#__PURE__*/_jsx(InstrumentAndVisualizer,{state:state,dispatch:dispatch})]});}","map":{"version":3,"sources":["/Users/michaelschroeder/Documents/GitHub/final-project-symphony-quadtuplets/client/src/MainPage.tsx"],"names":["React","useEffect","useLocation","Tone","Music32","Popup","InstrumentContainer","DispatchAction","SideNav","VisualizerContainer","addSong","InstrumentPanel","state","dispatch","instrument","get","VisualizerPanel","visualizer","name","InstrumentAndVisualizer","left","RecordingPopup","openPopup","closeModal","RecordingForm","useState","submitting","setSubmitting","submitted","setSubmitted","input","setInput","handleSubmit","e","preventDefault","setTimeout","handleInputChange","target","value","ShowWelcome","MainPage","location","isWelcome","console","log","start"],"mappings":"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","sourcesContent":["// 3rd party library imports\nimport React, { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport * as Tone from 'tone';\nimport { Music32 } from '@carbon/icons-react';\nimport Popup from 'reactjs-popup';\n\n// project imports\nimport { InstrumentContainer } from './Instruments';\nimport { AppState } from './State';\nimport { DispatchAction } from './Reducer';\nimport { SideNav } from './SideNav';\nimport { VisualizerContainer } from './Visualizers';\nimport \"./css/recording_popup.css\";\nimport { addSong } from './utils/apiCreators';\n\ntype PanelProps = {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n};\n\n/** ------------------------------------------------------------------------ **\n * Instrument and visualizer component\n ** ------------------------------------------------------------------------ */\n\nfunction InstrumentPanel({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component is the top-level for the instrument.\n   */\n  const instrument = state.get('instrument');\n\n  return (\n    <div>\n      {instrument && (\n        <InstrumentContainer\n          state={state}\n          dispatch={dispatch}\n          instrument={instrument}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction VisualizerPanel({ state }: PanelProps): JSX.Element {\n  /**\n   * This React component is the top-level for the visualizer.\n   */\n  const visualizer = state.get('visualizer');\n\n  return (\n    <div>\n      {visualizer && (\n        <VisualizerContainer key={visualizer.name} visualizer={visualizer} />\n      )}\n    </div>\n  );\n}\n\nfunction InstrumentAndVisualizer({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component bundles the instrument panel and visualizer panel together.\n   */\n\n  return (\n    <div\n      className=\"absolute right-0 bottom-0 top-0 flex flex-column\"\n      style={{ left: '16rem' }}\n    >\n      <InstrumentPanel state={state} dispatch={dispatch} />\n      <VisualizerPanel state={state} dispatch={dispatch} />\n      <RecordingPopup state={state} dispatch={dispatch} />\n    </div>\n  );\n}\n\nfunction RecordingPopup({state, dispatch}: PanelProps): JSX.Element {\n  /**\n   * This React component will be displayed after a song has been finished recording.\n   */\n\n  const openPopup: boolean = state.get('openPopup');\n\n  const closeModal = () => dispatch(new DispatchAction('TRIGGER_RECORDING_POPUP', {\n    openPopup: openPopup\n  }));\n\n  return (\n    <Popup open={openPopup} closeOnDocumentClick>\n      <div className=\"modal\">\n        <button className=\"close close-modal\" onClick={closeModal}>\n          &times;\n        </button>\n        <RecordingForm state={state} dispatch={dispatch}/>\n      </div>\n    </Popup>\n  );\n}\n\nfunction RecordingForm({state, dispatch}: PanelProps): JSX.Element {\n  const [submitting, setSubmitting] = React.useState(false);\n  const [submitted, setSubmitted] = React.useState(false);\n  const [input, setInput] = React.useState('');\n\n  const handleSubmit = async (e: React.ChangeEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setSubmitting(true);\n\n    // submit value entered into form input to state to finalize creation of song \n    await addSong(dispatch, input, state.get('song'));\n\n    setTimeout(() => {\n      setSubmitting(false);\n      setSubmitted(true);\n\n      setTimeout(() => {\n        setSubmitted(false);\n        setInput('');\n      }, 3000);\n    }, 3000);\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => setInput(e.target.value);\n\n  return (\n    <form className=\"recording-form\" onSubmit={handleSubmit}>\n      <fieldset className=\"form-fieldset\">\n        <label className=\"form-fieldset-label\">\n          <h3> You're almost done! </h3>\n          <p> As a last step, enter a title for your song recording. </p>\n          <input value={input} onChange={handleInputChange} placeholder=\"Enter a song title\"/>\n        </label>\n      </fieldset>\n      <button className=\"form-button\" type=\"submit\"> Submit </button>\n      <div className=\"form-submission-message\">\n        {submitting && <p> Submitting form... </p>}\n        {submitted && <p> Your song has been submitted! </p>}\n      </div>\n    </form>\n  );\n}\n\nfunction ShowWelcome(): JSX.Element {\n  return (\n    <div\n      className=\"absolute right-0 bottom-0 top-0 flex flex-column items-center justify-center\"\n      style={{ left: '16rem' }}\n    >\n      <div className=\"mw6 lh-copy mb4\">\n        <Music32 />\n        <div className=\"f3 fw7 mb2\">Welcome to the case study.</div>\n        <div className=\"f4 mb3\">\n          Select an instrument and a visualizer on the left to serve some fresh\n          beats.\n        </div>\n        <div className=\"f5\">The UI is yours to design. Express yourself.</div>\n      </div>\n    </div>\n  );\n}\n\n/** ------------------------------------------------------------------------ **\n * Main page component\n ** ------------------------------------------------------------------------ */\n\nexport function MainPage({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component bundles together the entire main page.\n   */\n\n  const location = useLocation();\n  const isWelcome = !state.get('instrument');\n  console.log('INSTRUMENT', isWelcome);\n\n  useEffect(() => {\n    dispatch(new DispatchAction('SET_LOCATION', { location }));\n  }, [dispatch, location]);\n\n  return (\n    <div\n      className=\"fixed top-0 left-0 h-100 w-100 bg-white\"\n      onClick={() => Tone.start()}\n    >\n      <SideNav state={state} dispatch={dispatch} />\n      {isWelcome ? (\n        <ShowWelcome />\n      ) : (\n        <InstrumentAndVisualizer state={state} dispatch={dispatch} />\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}