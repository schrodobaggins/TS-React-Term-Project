{"ast":null,"code":"import _regeneratorRuntime from\"/Users/michaelschroeder/Documents/GitHub/final-project-symphony-quadtuplets/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/michaelschroeder/Documents/GitHub/final-project-symphony-quadtuplets/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/michaelschroeder/Documents/GitHub/final-project-symphony-quadtuplets/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// 3rd party library imports\nimport classNames from'classnames';import{List}from'immutable';import React from'react';import{useLocation,Link}from'react-router-dom';import{RadioButton20,RadioButtonChecked20,Music20,TrashCan20,OverflowMenuHorizontal20}from'@carbon/icons-react';// project imports\nimport{DispatchAction}from'./Reducer';import'./css/ud-menu.css';import'./css/recording_button.css';import{getSong,updateSong,deleteSong,getSongs}from'./utils/apiCreators';/** ------------------------------------------------------------------------ **\n * All the components in the side navigation.\n ** ------------------------------------------------------------------------ */import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Section=function Section(_ref){var title=_ref.title,children=_ref.children;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-column h-25 bb b--light-gray pa3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fw7 mb2\",children:[title,\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-auto overflow-auto\",children:children})]});};function RadioButton(_ref2){var to=_ref2.to,text=_ref2.text,active=_ref2.active,onClick=_ref2.onClick;return/*#__PURE__*/_jsx(Link,{to:to,className:\"no-underline\",children:/*#__PURE__*/_jsxs(\"div\",{className:classNames('f7 flex items-center black',{fw7:active}),onClick:onClick,children:[active?/*#__PURE__*/_jsx(RadioButtonChecked20,{className:\"mr1\"}):/*#__PURE__*/_jsx(RadioButton20,{className:\"mr1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dim\",children:text})]})});}function RecordingButton(_ref3){var isRecording=_ref3.isRecording,onClick=_ref3.onClick;return/*#__PURE__*/_jsx(\"div\",{className:\"recording-buttons\",children:/*#__PURE__*/_jsx(\"button\",{className:\"recording-button\",onClick:onClick,children:isRecording?\"Stop\":\"Record\"})});}function UpdateAndDeleteButton(_ref4){var state=_ref4.state,dispatch=_ref4.dispatch,songId=_ref4.songId,isShowingUD=_ref4.isShowingUD;var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),newTitle=_React$useState2[0],setNewTitle=_React$useState2[1];var handleSubmit=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!songId){_context.next=4;break;}_context.next=4;return updateSong(dispatch,newTitle,songId);case 4:setNewTitle('');case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref5.apply(this,arguments);};}();var handleDelete=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!songId){_context2.next=3;break;}_context2.next=3;return deleteSong(dispatch,songId);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(){return _ref6.apply(this,arguments);};}();var handleTitleChange=function handleTitleChange(e){return setNewTitle(e.target.value);};return/*#__PURE__*/_jsx(\"div\",{className:\"ud-menu\",children:isShowingUD&&/*#__PURE__*/_jsxs(\"div\",{className:\"ud-menu-content\",children:[/*#__PURE__*/_jsx(\"form\",{className:\"update-form\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(\"fieldset\",{className:\"update-form-fieldset\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{value:newTitle,onChange:handleTitleChange,type:\"text\",placeholder:\"Edit the song title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",hidden:true})]})})}),/*#__PURE__*/_jsx(TrashCan20,{className:\"delete-icon dim\",onClick:handleDelete})]})});}function Instruments(_ref7){var _state$get;var state=_ref7.state;var instruments=state.get('instruments');var activeInstrument=(_state$get=state.get('instrument'))===null||_state$get===void 0?void 0:_state$get.name;var location=useLocation();return/*#__PURE__*/_jsx(Section,{title:\"Instruments\",children:instruments.map(function(i){return/*#__PURE__*/_jsx(RadioButton,{to:\"/\".concat(i.name).concat(location.search),text:i.name,active:i.name===activeInstrument,onClick:function onClick(){return console.log(i.name);}},i.name);})});}function Visualizers(_ref8){var _state$get2;var state=_ref8.state;var visualizers=state.get('visualizers');var activeVisualizer=(_state$get2=state.get('visualizer'))===null||_state$get2===void 0?void 0:_state$get2.name;var location=useLocation();return/*#__PURE__*/_jsx(Section,{title:\"Visualizers\",children:visualizers.map(function(v){return/*#__PURE__*/_jsx(RadioButton,{to:{pathname:location.pathname,search:\"?visualizer=\".concat(v.name)},text:v.name,active:v.name===activeVisualizer,onClick:function onClick(){return console.log(v.name);}},v.name);})});}function Search(_ref9){var handleSearchChange=_ref9.handleSearchChange;var handleSubmit=function handleSubmit(e){e.preventDefault();};return/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(\"fieldset\",{className:\"form-fieldset\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",onChange:handleSearchChange,placeholder:\"Search\",autoComplete:\"off\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",hidden:true})]})})});}function Song(_ref10){var state=_ref10.state,dispatch=_ref10.dispatch,songId=_ref10.songId,song=_ref10.song;// UD is an abbreviation for update/delete \nvar _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isShowingUD=_React$useState4[0],setIsShowingUD=_React$useState4[1];return song!==undefined?/*#__PURE__*/_jsxs(\"div\",{className:\"song-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex w-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"f7 pointer song underline no-underline i\",onClick:function onClick(){return dispatch(new DispatchAction('PLAY_SONG',{id:song.get('id')}));},children:/*#__PURE__*/_jsxs(\"div\",{className:\"song-content dim\",children:[/*#__PURE__*/_jsx(Music20,{className:\"mr1\"}),song.get('songTitle')]})},song.get('id')),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-menu\",children:/*#__PURE__*/_jsx(OverflowMenuHorizontal20,{onClick:function onClick(){return setIsShowingUD(!isShowingUD);},className:\"dim\"})})]}),/*#__PURE__*/_jsx(UpdateAndDeleteButton,{state:state,dispatch:dispatch,songId:songId,isShowingUD:isShowingUD})]}):/*#__PURE__*/_jsx(_Fragment,{children:\" \"});}function Songs(_ref11){var state=_ref11.state,dispatch=_ref11.dispatch,searchTerm=_ref11.searchTerm;var songs=state.get('songs',List());return/*#__PURE__*/_jsx(Section,{title:\"Playlist\",children:songs.filter(function(song){return song.get('songTitle').includes(searchTerm);}).map(function(song){var songId=song.get('id');return/*#__PURE__*/_jsx(Song,{state:state,dispatch:dispatch,song:song,songId:songId});})});}function RecordingButtons(_ref12){var state=_ref12.state,dispatch=_ref12.dispatch;var isRecording=state.get('isRecording');var openPopup=state.get('openPopup');var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),startRecording=_React$useState6[0],setStartRecording=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),stopRecording=_React$useState8[0],setStopRecording=_React$useState8[1];return/*#__PURE__*/_jsxs(Section,{title:\"Record a Song\",children:[/*#__PURE__*/_jsx(RecordingButton,{onClick:function onClick(){// notify redux and update state for whether the user is recording or not \ndispatch(new DispatchAction('TRIGGER_RECORDING',{isRecording:isRecording}));// create some sort of condition here if isRecording is set to true\nif(!state.get('isRecording')){setStartRecording(true);// notify redux that a new song should be created\n// a song should simply hold a list of the notes clicked by the user \ndispatch(new DispatchAction('RECORD_A_SONG',{song:[]}));}else{// stop recording a song and add song to db\nsetStartRecording(false);setStopRecording(true);setTimeout(function(){setStopRecording(false);},3000);// if a recording is stopped, then open the popup menu where the song title will be input\ndispatch(new DispatchAction('TRIGGER_RECORDING_POPUP',{openPopup:openPopup}));}},isRecording:isRecording}),/*#__PURE__*/_jsxs(\"div\",{className:\"recording-button-message-wrapper\",children:[startRecording&&/*#__PURE__*/_jsxs(\"div\",{className:\"recording-button-message\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"blinking-record-icon\",children:\"  \"}),/*#__PURE__*/_jsx(\"p\",{children:\" Your recording is live \"})]}),stopRecording&&/*#__PURE__*/_jsx(\"p\",{children:\" Your recording has stopped \"})]})]});}export function SideNav(_ref13){var state=_ref13.state,dispatch=_ref13.dispatch;var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),searchTerm=_React$useState10[0],setSearchTerm=_React$useState10[1];var handleSearchChange=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(e.target.value==='')){_context3.next=5;break;}_context3.next=3;return getSongs(dispatch);case 3:setSearchTerm('');return _context3.abrupt(\"return\");case 5:if(!searchTerm.includes(e.target.value)){_context3.next=8;break;}// if the new search value is already in search term, another API is not necessary\nsetSearchTerm(e.target.value);return _context3.abrupt(\"return\");case 8:_context3.next=10;return getSong(dispatch,e.target.value);case 10:setSearchTerm('');case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function handleSearchChange(_x2){return _ref14.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-0 left-0 bottom-0 w5 z-1 shadow-1 bg-white flex flex-column\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h3 fw7 f5 flex items-center pl3 bb b--light-gray\",children:\"Quadtuplets\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-auto\",children:[/*#__PURE__*/_jsx(Instruments,{state:state,dispatch:dispatch}),/*#__PURE__*/_jsx(Visualizers,{state:state,dispatch:dispatch}),/*#__PURE__*/_jsx(Search,{handleSearchChange:handleSearchChange}),/*#__PURE__*/_jsx(Songs,{state:state,dispatch:dispatch,searchTerm:searchTerm}),/*#__PURE__*/_jsx(RecordingButtons,{state:state,dispatch:dispatch})]})]});}","map":{"version":3,"sources":["/Users/michaelschroeder/Documents/GitHub/final-project-symphony-quadtuplets/client/src/SideNav.tsx"],"names":["classNames","List","React","useLocation","Link","RadioButton20","RadioButtonChecked20","Music20","TrashCan20","OverflowMenuHorizontal20","DispatchAction","getSong","updateSong","deleteSong","getSongs","Section","title","children","RadioButton","to","text","active","onClick","fw7","RecordingButton","isRecording","UpdateAndDeleteButton","state","dispatch","songId","isShowingUD","useState","newTitle","setNewTitle","handleSubmit","e","preventDefault","handleDelete","handleTitleChange","target","value","Instruments","instruments","get","activeInstrument","name","location","map","i","search","console","log","Visualizers","visualizers","activeVisualizer","v","pathname","Search","handleSearchChange","Song","song","setIsShowingUD","undefined","id","Songs","searchTerm","songs","filter","includes","RecordingButtons","openPopup","startRecording","setStartRecording","stopRecording","setStopRecording","setTimeout","SideNav","setSearchTerm"],"mappings":"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","sourcesContent":["// 3rd party library imports\nimport classNames from 'classnames';\nimport { List, Map } from 'immutable';\nimport React from 'react';\nimport { useLocation, Link } from 'react-router-dom';\nimport {\n  RadioButton20,\n  RadioButtonChecked20,\n  Music20,\n  TrashCan20,\n  OverflowMenuHorizontal20,\n} from '@carbon/icons-react';\n\n// project imports\nimport { DispatchAction } from './Reducer';\nimport { AppState } from './State';\nimport { Instrument } from './Instruments';\nimport { Visualizer } from './Visualizers';\nimport './css/ud-menu.css';\nimport './css/recording_button.css';\nimport { getSong, updateSong, deleteSong, getSongs } from './utils/apiCreators';\n\n/** ------------------------------------------------------------------------ **\n * All the components in the side navigation.\n ** ------------------------------------------------------------------------ */\n\ninterface SideNavProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n  isShowingUD?: boolean;\n  songId?: number;\n  song?: Map<any, any>; \n  handleSearchChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  searchTerm?: string;\n}\n\ninterface SearchProps {\n  handleSearchChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nconst Section: React.FC<{ title: string }> = ({ title, children }) => {\n  return (\n    <div className=\"flex flex-column h-25 bb b--light-gray pa3\">\n      <div className=\"fw7 mb2\">{title} </div>\n      <div className=\"flex-auto overflow-auto\">{children}</div>\n    </div>\n  );\n};\n\ninterface RadioButtonProps {\n  to: any,\n  text: string,\n  active: boolean,\n  onClick: () => void\n}\n\n// isActive will change the text contained in the record button\n// onClick will dispatch to redux action in Reducer.tsx\ninterface RecordingButtonProps {\n  isRecording: boolean,\n  onClick: () => void\n}\n\nfunction RadioButton({ to, text, active, onClick }: RadioButtonProps): JSX.Element {\n  return (\n    <Link to={to} className=\"no-underline\">\n      <div\n        className={classNames('f7 flex items-center black', { fw7: active })}\n        onClick={onClick}\n      >\n        {active ? (\n          <RadioButtonChecked20 className=\"mr1\" />\n        ) : (\n          <RadioButton20 className=\"mr1\" />\n        )}\n        <div className=\"dim\">{text}</div>\n      </div>\n    </Link>\n  );\n}\n\nfunction RecordingButton({ isRecording, onClick }: RecordingButtonProps): JSX.Element {\n  return (\n    <div className=\"recording-buttons\">\n      <button className=\"recording-button\" onClick={onClick}>\n        {isRecording ? \"Stop\" : \"Record\"}\n      </button>\n    </div>\n  );\n}\n\nfunction UpdateAndDeleteButton({state, dispatch, songId, isShowingUD}: SideNavProps): JSX.Element {\n\n  const [newTitle, setNewTitle] = React.useState('');\n\n  const handleSubmit = async (e: React.ChangeEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    if(songId)\n      await updateSong(dispatch, newTitle, songId);\n\n    setNewTitle('');\n  };\n\n  const handleDelete = async () => {\n    if(songId)\n      await deleteSong(dispatch, songId);\n  };\n\n  const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) => setNewTitle(e.target.value);\n\n  return (\n    <div className=\"ud-menu\">\n      { isShowingUD && (\n        <div className=\"ud-menu-content\">\n          <form className=\"update-form\" onSubmit={handleSubmit}>\n            <fieldset className=\"update-form-fieldset\">\n              <label>\n                <input\n                    value={newTitle}\n                    onChange={handleTitleChange}\n                    type=\"text\"\n                    placeholder=\"Edit the song title\"\n                />\n                <input type=\"submit\" hidden /> \n              </label>\n            </fieldset>\n          </form>\n          <TrashCan20 \n            className=\"delete-icon dim\"\n            onClick={handleDelete}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction Instruments({ state }: SideNavProps): JSX.Element {\n  const instruments: List<Instrument> = state.get('instruments');\n  const activeInstrument = state.get('instrument')?.name;\n  const location = useLocation();\n\n  return (\n    <Section title=\"Instruments\">\n      {instruments.map(i => (\n        <RadioButton\n          key={i.name}\n          to={`/${i.name}${location.search}`}\n          text={i.name}\n          active={i.name === activeInstrument}\n          onClick={() => console.log(i.name)}\n        />\n      ))}\n    </Section>\n  );\n}\n\nfunction Visualizers({ state }: SideNavProps): JSX.Element {\n  const visualizers: List<Visualizer> = state.get('visualizers');\n  const activeVisualizer = state.get('visualizer')?.name;\n  const location = useLocation();\n\n  return (\n    <Section title=\"Visualizers\">\n      {visualizers.map(v => (\n        <RadioButton\n          key={v.name}\n          to={{\n            pathname: location.pathname,\n            search: `?visualizer=${v.name}`,\n          }}\n          text={v.name}\n          active={v.name === activeVisualizer}\n          onClick={() => console.log(v.name)}\n        />\n      ))}\n    </Section>\n  );\n}\n\nfunction Search({handleSearchChange}: SearchProps): JSX.Element {\n  const handleSubmit = (e: React.ChangeEvent<HTMLFormElement>) => {\n    e.preventDefault();\n  };\n  \n  return (\n    <form onSubmit={handleSubmit}>\n      <fieldset className=\"form-fieldset\">\n        <label>\n          <input \n            type=\"text\"\n            name=\"search\"\n            onChange={handleSearchChange}\n            placeholder=\"Search\"\n            autoComplete=\"off\"\n          />\n          <input type=\"submit\" hidden />\n        </label>\n      </fieldset>\n    </form>\n  );\n}\n\nfunction Song({state, dispatch, songId, song}: SideNavProps): JSX.Element {\n\n  // UD is an abbreviation for update/delete \n  const [isShowingUD, setIsShowingUD] = React.useState(false);  \n\n  return ( \n    (song !== undefined) ? \n      <div className=\"song-wrapper\">\n        <div className=\"inline-flex w-100\">\n          <div\n            key={song.get('id')}\n            className=\"f7 pointer song underline no-underline i\"\n            onClick={() =>\n              dispatch(new DispatchAction('PLAY_SONG', { id: song.get('id') }))\n            }\n          >\n            <div className=\"song-content dim\">\n              <Music20 className=\"mr1\" />\n              {song.get('songTitle')}\n            </div>\n          </div>\n          <div className=\"overflow-menu\">\n            <OverflowMenuHorizontal20 \n              onClick={() => setIsShowingUD(!isShowingUD)}\n              className=\"dim\"\n            />\n          </div>\n        </div>\n        \n        <UpdateAndDeleteButton state={state} dispatch={dispatch} songId={songId} isShowingUD={isShowingUD}/>\n      </div> \n      : <> </>\n  );\n}\n\nfunction Songs({ state, dispatch, searchTerm }: SideNavProps): JSX.Element {\n  const songs: List<any> = state.get('songs', List());\n\n  return (\n    <Section title=\"Playlist\">\n      {songs\n        .filter(song => song.get('songTitle').includes(searchTerm))\n        .map(song => {\n        const songId: number = song.get('id');\n\n        return (\n          <Song state={state} dispatch={dispatch} song={song} songId={songId}/>\n        );\n      })}\n    </Section>\n  );\n}\n\nfunction RecordingButtons({ state, dispatch }: SideNavProps): JSX.Element {\n  const isRecording: boolean = state.get('isRecording');\n  const openPopup: boolean = state.get('openPopup');\n  const [startRecording, setStartRecording] = React.useState(false);\n  const [stopRecording, setStopRecording] = React.useState(false);\n\n  return (\n    <Section title=\"Record a Song\">\n      <RecordingButton\n        onClick={() => {\n          // notify redux and update state for whether the user is recording or not \n          dispatch(new DispatchAction('TRIGGER_RECORDING', {\n            isRecording: isRecording\n          }));\n\n          // create some sort of condition here if isRecording is set to true\n          if(!state.get('isRecording')) {\n            setStartRecording(true);\n\n            // notify redux that a new song should be created\n            // a song should simply hold a list of the notes clicked by the user \n            dispatch(new DispatchAction('RECORD_A_SONG', {\n              song: []\n            }));\n          }\n          else {\n            // stop recording a song and add song to db\n            setStartRecording(false);\n            setStopRecording(true);\n\n            setTimeout(() => {\n              setStopRecording(false);\n            }, 3000);\n\n            // if a recording is stopped, then open the popup menu where the song title will be input\n            dispatch(new DispatchAction('TRIGGER_RECORDING_POPUP', {\n              openPopup: openPopup\n            }));\n          }\n        }}\n        isRecording={isRecording}\n      />\n      <div className=\"recording-button-message-wrapper\">\n        {startRecording && \n          <div className=\"recording-button-message\">\n            <div className=\"blinking-record-icon\">  </div>\n            <p> Your recording is live </p>\n          </div>\n        }\n        {stopRecording && <p> Your recording has stopped </p>}\n      </div>\n    </Section>\n  );\n}\n\nexport function SideNav({ state, dispatch }: SideNavProps): JSX.Element {\n  const [searchTerm, setSearchTerm] = React.useState('');\n\n  const handleSearchChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if(e.target.value === '') {\n      // clear searched songs from state\n      await getSongs(dispatch);\n      setSearchTerm('');\n      return;\n    }\n\n    if(searchTerm.includes(e.target.value)) {\n      // if the new search value is already in search term, another API is not necessary\n      setSearchTerm(e.target.value);\n      return;\n    }\n\n    await getSong(dispatch, e.target.value);\n    setSearchTerm('');\n  };\n  \n  return (\n    <div className=\"absolute top-0 left-0 bottom-0 w5 z-1 shadow-1 bg-white flex flex-column\">\n      <div className=\"h3 fw7 f5 flex items-center pl3 bb b--light-gray\">\n        Quadtuplets\n      </div>\n      <div className=\"flex-auto\">\n        <Instruments state={state} dispatch={dispatch} />\n        <Visualizers state={state} dispatch={dispatch} />\n        <Search handleSearchChange={handleSearchChange}/>\n        <Songs state={state} dispatch={dispatch} searchTerm={searchTerm}/>\n        <RecordingButtons state={state} dispatch={dispatch}/>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}