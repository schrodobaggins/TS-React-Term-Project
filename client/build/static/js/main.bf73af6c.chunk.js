(this.webpackJsonplambdavibe=this.webpackJsonplambdavibe||[]).push([[0],{109:function(e,t,n){},110:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(45),s=n.n(i),o=n(9),r=n.n(o),u=n(12),d=n(13),l=n(40),h=n(17),b=n(20),v=n(121),j=n(59),x=n(2),p=n(14),f=n(18),m=function e(t,n){Object(x.a)(this,e),this.type=void 0,this.args=void 0,this.type=t,this.args=Object(f.d)(n)};function g(e,t){var n=t.type,a=t.args;console.debug("".concat(n));var c=function(){switch(n){case"SET_SOCKET":var t=e.get("socket");return t&&t.close(),e.set("socket",a.get("socket"));case"DELETE_SOCKET":return e.delete("socket");case"SET_SONGS":var c=a.get("songs");return console.log(c),e.set("songs",c);case"PLAY_SONG":var i=e.get("songs").find((function(e){return e.get("id")===a.get("id")})).get("notes");return e.set("notes",i);case"STOP_SONG":return e.delete("notes");case"SET_LOCATION":var s,o=a.getIn(["location","pathname"],""),r=a.getIn(["location","search"],""),u=o.substring(1),d=null!==(s=new URLSearchParams(r.substring(1)).get("visualizer"))&&void 0!==s?s:"",l=e.get("instruments"),h=e.get("visualizers"),b=l.find((function(e){return e.name===u})),v=h.find((function(e){return e.name===d}));return e.set("instrument",b).set("visualizer",v);case"TRIGGER_RECORDING":var j=a.get("isRecording");return e.set("isRecording",!j);case"TRIGGER_RECORDING_POPUP":var x=a.get("openPopup");return e.set("openPopup",!x);case"RECORD_A_SONG":var f=a.get("song");return e.set("song",f);case"ADD_NOTE_TO_SONG":var m=a.get("note"),g=e.get("song");return g=[].concat(Object(p.a)(g),[m]),e.set("song",g);default:return console.error("type unknown: ".concat(n,"\n"),a.toJS()),e}}();return console.debug(c.update("socket",(function(e){return e?"[socket]":e})).toJS()),c}var O=n(11),w=function e(t,n){Object(x.a)(this,e),this.name=void 0,this.component=void 0,this.name=t,this.component=n};function N(e){var t=e.name;return Object(O.jsx)("div",{className:"w-100 h3 bb b--light-gray flex justify-between items-center ph4",children:Object(O.jsx)("div",{children:t})})}var k=function(e){var t=e.instrument,n=e.state,c=e.dispatch,i=t.component,s=Object(a.useState)(new b.e({oscillator:{type:"sine"}}).toDestination()),o=Object(d.a)(s,2),r=o[0],u=o[1],l=n.get("notes");return Object(a.useEffect)((function(){if(l&&r){var e=l.split(" "),t=e.map((function(e,t){return{idx:t,time:"+".concat(t/4),note:e,velocity:1}}));return new b.c((function(t,n){r.triggerAttackRelease(n.note,"4n",t,n.velocity),n.idx===e.length-1&&c(new m("STOP_SONG"))}),t).start(0),b.f.start(),function(){b.f.cancel()}}return function(){}}),[l,r,c]),Object(O.jsxs)("div",{children:[Object(O.jsx)(N,{name:t.name}),Object(O.jsx)("div",{className:"bg-white absolute right-0 left-0",style:{top:"4rem"},children:Object(O.jsx)(i,{name:t.name,state:n,dispatch:c,synth:r,setSynth:u})})]})},y=n(31),S=n.n(y),E=n(119),R=n(120),C=n(122),D=(n(82),n(83),n(39)),T=n.n(D),_=function(){var e=Object(u.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get("/api/songs",{headers:{"Content-Type":"application/json"}});case 3:200===(n=e.sent).status&&t(new m("SET_SONGS",{songs:n.data.songs})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get("/api/songs/".concat(n),{headers:{"Content-Type":"application/json"}});case 3:200===(a=e.sent).status&&t(new m("SET_SONGS",{songs:a.data.songs})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.put("/api/songs/".concat(a),null,{params:{newTitle:n}});case 3:if(200!==e.sent.status){e.next=7;break}return e.next=7,_(t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(r.a.mark((function e(t,n,a){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={song_title:n,song:a},e.next=4,T.a.post("/api/songs",c,{headers:{"Content-Type":"application/json"}});case 4:if(201!==e.sent.status){e.next=8;break}return e.next=8,_(t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.delete("/api/songs/".concat(n));case 3:if(200!==e.sent.status){e.next=7;break}return e.next=7,_(t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(e){var t=e.title,n=e.children;return Object(O.jsxs)("div",{className:"flex flex-column h-25 bb b--light-gray pa3",children:[Object(O.jsxs)("div",{className:"fw7 mb2",children:[t," "]}),Object(O.jsx)("div",{className:"flex-auto overflow-auto",children:n})]})};function z(e){var t=e.to,n=e.text,a=e.active,c=e.onClick;return Object(O.jsx)(l.b,{to:t,className:"no-underline",children:Object(O.jsxs)("div",{className:S()("f7 flex items-center black",{fw7:a}),onClick:c,children:[a?Object(O.jsx)(E.b,{className:"mr1"}):Object(O.jsx)(E.a,{className:"mr1"}),Object(O.jsx)("div",{className:"dim",children:n})]})})}function B(e){var t=e.isRecording,n=e.onClick;return Object(O.jsx)("div",{className:"recording-buttons",children:Object(O.jsx)("button",{className:"recording-button",onClick:n,children:t?"Stop":"Record"})})}function F(e){e.state;var t=e.dispatch,n=e.songId,a=e.isShowingUD,i=c.a.useState(""),s=Object(d.a)(i,2),o=s[0],l=s[1],h=function(){var e=Object(u.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!n){e.next=4;break}return e.next=4,A(t,o,n);case 4:l("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,I(t,n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"ud-menu",children:a&&Object(O.jsxs)("div",{className:"ud-menu-content",children:[Object(O.jsx)("form",{className:"update-form",onSubmit:h,children:Object(O.jsx)("fieldset",{className:"update-form-fieldset",children:Object(O.jsxs)("label",{children:[Object(O.jsx)("input",{value:o,onChange:function(e){return l(e.target.value)},type:"text",placeholder:"Edit the song title"}),Object(O.jsx)("input",{type:"submit",hidden:!0})]})})}),Object(O.jsx)(R.a,{className:"delete-icon dim",onClick:b})]})})}function U(e){var t,n=e.state,a=n.get("instruments"),c=null===(t=n.get("instrument"))||void 0===t?void 0:t.name,i=Object(h.f)();return Object(O.jsx)(M,{title:"Instruments",children:a.map((function(e){return Object(O.jsx)(z,{to:"/".concat(e.name).concat(i.search),text:e.name,active:e.name===c,onClick:function(){return console.log(e.name)}},e.name)}))})}function W(e){var t,n=e.state,a=n.get("visualizers"),c=null===(t=n.get("visualizer"))||void 0===t?void 0:t.name,i=Object(h.f)();return Object(O.jsx)(M,{title:"Visualizers",children:a.map((function(e){return Object(O.jsx)(z,{to:{pathname:i.pathname,search:"?visualizer=".concat(e.name)},text:e.name,active:e.name===c,onClick:function(){return console.log(e.name)}},e.name)}))})}function L(e){var t=e.handleSearchChange;return Object(O.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(O.jsx)("fieldset",{className:"form-fieldset",children:Object(O.jsxs)("label",{children:[Object(O.jsx)("input",{type:"text",name:"search",onChange:t,placeholder:"Search",autoComplete:"off"}),Object(O.jsx)("input",{type:"submit",hidden:!0})]})})})}function H(e){var t=e.state,n=e.dispatch,a=e.songId,i=e.song,s=c.a.useState(!1),o=Object(d.a)(s,2),r=o[0],u=o[1];return void 0!==i?Object(O.jsxs)("div",{className:"song-wrapper",children:[Object(O.jsxs)("div",{className:"inline-flex w-100",children:[Object(O.jsx)("div",{className:"f7 pointer song underline no-underline i",onClick:function(){return n(new m("PLAY_SONG",{id:i.get("id")}))},children:Object(O.jsxs)("div",{className:"song-content dim",children:[Object(O.jsx)(v.a,{className:"mr1"}),i.get("songTitle")]})},i.get("id")),Object(O.jsx)("div",{className:"overflow-menu",children:Object(O.jsx)(C.a,{onClick:function(){return u(!r)},className:"dim"})})]}),Object(O.jsx)(F,{state:t,dispatch:n,songId:a,isShowingUD:r})]}):Object(O.jsx)(O.Fragment,{children:" "})}function V(e){var t=e.state,n=e.dispatch,a=e.searchTerm,c=t.get("songs",Object(f.a)());return Object(O.jsx)(M,{title:"Playlist",children:c.filter((function(e){return e.get("songTitle").includes(a)})).map((function(e){var a=e.get("id");return Object(O.jsx)(H,{state:t,dispatch:n,song:e,songId:a})}))})}function Y(e){var t=e.state,n=e.dispatch,a=t.get("isRecording"),i=t.get("openPopup"),s=c.a.useState(!1),o=Object(d.a)(s,2),r=o[0],u=o[1],l=c.a.useState(!1),h=Object(d.a)(l,2),b=h[0],v=h[1];return Object(O.jsxs)(M,{title:"Record a Song",children:[Object(O.jsx)(B,{onClick:function(){n(new m("TRIGGER_RECORDING",{isRecording:a})),t.get("isRecording")?(u(!1),v(!0),setTimeout((function(){v(!1)}),3e3),n(new m("TRIGGER_RECORDING_POPUP",{openPopup:i}))):(u(!0),n(new m("RECORD_A_SONG",{song:[]})))},isRecording:a}),Object(O.jsxs)("div",{className:"recording-button-message-wrapper",children:[r&&Object(O.jsxs)("div",{className:"recording-button-message",children:[Object(O.jsx)("div",{className:"blinking-record-icon",children:"  "}),Object(O.jsx)("p",{children:" Your recording is live "})]}),b&&Object(O.jsx)("p",{children:" Your recording has stopped "})]})]})}function K(e){var t=e.state,n=e.dispatch,a=c.a.useState(""),i=Object(d.a)(a,2),s=i[0],o=i[1],l=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.target.value){e.next=5;break}return e.next=3,_(n);case 3:return o(""),e.abrupt("return");case 5:if(!s.includes(t.target.value)){e.next=8;break}return o(t.target.value),e.abrupt("return");case 8:return e.next=10,G(n,t.target.value);case 10:o("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"absolute top-0 left-0 bottom-0 w5 z-1 shadow-1 bg-white flex flex-column",children:[Object(O.jsx)("div",{className:"h3 fw7 f5 flex items-center pl3 bb b--light-gray",children:"Quadtuplets"}),Object(O.jsxs)("div",{className:"flex-auto",children:[Object(O.jsx)(U,{state:t,dispatch:n}),Object(O.jsx)(W,{state:t,dispatch:n}),Object(O.jsx)(L,{handleSearchChange:l}),Object(O.jsx)(V,{state:t,dispatch:n,searchTerm:s}),Object(O.jsx)(Y,{state:t,dispatch:n})]})]})}var J=n(62),q=n.n(J),Q=function e(t,n){Object(x.a)(this,e),this.name=void 0,this.draw=void 0,this.name=t,this.draw=n};function X(e){var t=e.visualizer,n=t.name,c=t.draw,i="Circumference"===n,s=Object(a.useMemo)((function(){return new b.a("waveform",256)}),[]),o=Object(a.useCallback)((function(e){var t=window.innerWidth,n=window.innerHeight/2;e.resizeCanvas(t,n,!1)}),[]);Object(a.useEffect)((function(){return b.g().volume.value=-5,b.g().connect(s),function(){b.g().disconnect(s)}}),[s]);return Object(O.jsxs)("div",{className:i?"bg-grey absolute right-0 h-100 w-50":"bg-black absolute bottom-0 right-0 left-0 h-50",children:[Object(O.jsx)("div",{className:"z-1 absolute left-0 top-0 pa4 white f5",children:n}),Object(O.jsx)(q.a,{setup:function(e,t){var n=i?window.innerWidth/2:window.innerWidth,a=i?window.innerHeight:window.innerHeight/2;e.createCanvas(n,a).parent(t),e.angleMode(e.DEGREES)},draw:function(e){return c(e,s)},windowResized:o,className:i?"circumference-visualizer":""})]})}n(109);function Z(e){var t=e.state,n=e.dispatch,a=t.get("instrument");return Object(O.jsx)("div",{children:a&&Object(O.jsx)(k,{state:t,dispatch:n,instrument:a})})}function $(e){var t=e.state.get("visualizer");return Object(O.jsx)("div",{children:t&&Object(O.jsx)(X,{visualizer:t},t.name)})}function ee(e){var t=e.state,n=e.dispatch;return Object(O.jsxs)("div",{className:"absolute right-0 bottom-0 top-0 flex flex-column",style:{left:"16rem"},children:[Object(O.jsx)(Z,{state:t,dispatch:n}),Object(O.jsx)($,{state:t,dispatch:n}),Object(O.jsx)(te,{state:t,dispatch:n})]})}function te(e){var t=e.state,n=e.dispatch,a=t.get("openPopup");return Object(O.jsx)(j.a,{open:a,closeOnDocumentClick:!0,children:Object(O.jsxs)("div",{className:"modal",children:[Object(O.jsx)("button",{className:"close close-modal",onClick:function(){return n(new m("TRIGGER_RECORDING_POPUP",{openPopup:a}))},children:"\xd7"}),Object(O.jsx)(ne,{state:t,dispatch:n})]})})}function ne(e){var t=e.state,n=e.dispatch,a=c.a.useState(!1),i=Object(d.a)(a,2),s=i[0],o=i[1],l=c.a.useState(!1),h=Object(d.a)(l,2),b=h[0],v=h[1],j=c.a.useState(""),x=Object(d.a)(j,2),p=x[0],f=x[1],m=function(){var e=Object(u.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),o(!0),e.next=4,P(n,p,t.get("song"));case 4:setTimeout((function(){o(!1),v(!0),setTimeout((function(){v(!1),f("")}),3e3)}),3e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("form",{className:"recording-form",onSubmit:m,children:[Object(O.jsx)("fieldset",{className:"form-fieldset",children:Object(O.jsxs)("label",{className:"form-fieldset-label",children:[Object(O.jsx)("h3",{children:" You're almost done! "}),Object(O.jsx)("p",{children:" As a last step, enter a title for your song recording. "}),Object(O.jsx)("input",{value:p,onChange:function(e){return f(e.target.value)},placeholder:"Enter a song title"})]})}),Object(O.jsx)("button",{className:"form-button",type:"submit",children:" Submit "}),Object(O.jsxs)("div",{className:"form-submission-message",children:[s&&Object(O.jsx)("p",{children:" Submitting form... "}),b&&Object(O.jsx)("p",{children:" Your song has been submitted! "})]})]})}function ae(){return Object(O.jsx)("div",{className:"absolute right-0 bottom-0 top-0 flex flex-column items-center justify-center",style:{left:"16rem"},children:Object(O.jsxs)("div",{className:"mw6 lh-copy mb4",children:[Object(O.jsx)(v.b,{}),Object(O.jsx)("div",{className:"f3 fw7 mb2",children:"Welcome to the case study."}),Object(O.jsx)("div",{className:"f4 mb3",children:"Select an instrument and a visualizer on the left to serve some fresh beats."}),Object(O.jsx)("div",{className:"f5",children:"The UI is yours to design. Express yourself."})]})})}function ce(e){var t=e.state,n=e.dispatch,c=Object(h.f)(),i=!t.get("instrument");return console.log("INSTRUMENT",i),Object(a.useEffect)((function(){n(new m("SET_LOCATION",{location:c}))}),[n,c]),Object(O.jsxs)("div",{className:"fixed top-0 left-0 h-100 w-100 bg-white",onClick:function(){return b.h()},children:[Object(O.jsx)(K,{state:t,dispatch:n}),i?Object(O.jsx)(ae,{}):Object(O.jsx)(ee,{state:t,dispatch:n})]})}function ie(e){var t=e.note,n=e.synth,a=e.minor,c=e.index,i=e.state,s=e.dispatch;return Object(O.jsx)("div",{onMouseDown:function(){null===n||void 0===n||n.triggerAttack("".concat(t)),i.get("isRecording")&&s(new m("ADD_NOTE_TO_SONG",{note:t}))},onMouseUp:function(){return null===n||void 0===n?void 0:n.triggerRelease("+0.25")},className:S()("ba pointer absolute dim",{"bg-black black h3":a,"black bg-white h4":!a}),style:{top:0,left:"".concat(2*c,"rem"),zIndex:a?1:0,width:a?"1.5rem":"2rem",marginLeft:a?"0.25rem":0}})}function se(e){var t=e.title,n=e.onClick,a=e.active;return Object(O.jsx)("div",{onClick:n,className:S()("dim pointer ph2 pv1 ba mr2 br1 fw7 bw1",{"b--black black":a,"gray b--light-gray":!a}),children:t})}var oe=new w("Piano",(function(e){var t=e.state,n=e.dispatch,a=e.synth,c=e.setSynth,i=Object(f.a)([{note:"C",idx:0},{note:"Db",idx:.5},{note:"D",idx:1},{note:"Eb",idx:1.5},{note:"E",idx:2},{note:"F",idx:3},{note:"Gb",idx:3.5},{note:"G",idx:4},{note:"Ab",idx:4.5},{note:"A",idx:5},{note:"Bb",idx:5.5},{note:"B",idx:6}]),s=Object(f.a)(["sine","sawtooth","square","triangle","fmsine","fmsawtooth","fmtriangle","amsine","amsawtooth","amtriangle"]);return Object(O.jsxs)("div",{className:"pv4",children:[Object(O.jsx)("div",{className:"relative dib h4 w-100 ml4",children:Object(f.c)(2,7).map((function(e){return i.map((function(c){var i=-1!==c.note.indexOf("b"),s="".concat(c.note).concat(e);return Object(O.jsx)(ie,{note:s,synth:a,minor:i,octave:e,index:7*(e-2)+c.idx,state:t,dispatch:n},s)}))}))}),Object(O.jsx)("div",{className:"pl4 pt4 flex",children:s.map((function(e){return Object(O.jsx)(se,{title:e,onClick:function(){return t=e,void c((function(e){return e.disconnect(),new b.e({oscillator:{type:t}}).toDestination()}));var t},active:(null===a||void 0===a?void 0:a.oscillator.type)===e},e)}))})]})}));n(110);function re(e){var t=e.note,n=e.synth,a=(e.index,e.state),c=e.dispatch;return Object(O.jsx)("div",{className:"ukulele-fret",onMouseDown:function(){console.log(t),null===n||void 0===n||n.triggerAttack("".concat(t)),a.get("isRecording")&&c(new m("ADD_NOTE_TO_SONG",{note:t}))},onMouseUp:function(){return null===n||void 0===n?void 0:n.triggerRelease("+0.25")}})}var ue=new w("mitchthebaker",(function(e){var t=e.state,n=e.dispatch,a=e.synth,c=(e.setSynth,Object(f.a)([[{note:"G",octave:4,idx:49},{note:"C",octave:4,idx:50},{note:"E",octave:4,idx:51},{note:"A",octave:4,idx:52}],[{note:"Ab",octave:5,idx:0},{note:"Db",octave:5,idx:1},{note:"F",octave:5,idx:2},{note:"Bb",octave:5,idx:3}],[{note:"A",octave:5,idx:4},{note:"D",octave:5,idx:5},{note:"Gb",octave:5,idx:6},{note:"B",octave:5,idx:7}],[{note:"Bb",octave:5,idx:8},{note:"Eb",octave:5,idx:9},{note:"G",octave:5,idx:10},{note:"C",octave:6,idx:11}],[{note:"B",octave:5,idx:12},{note:"E",octave:5,idx:13},{note:"Ab",octave:5,idx:14},{note:"Db",octave:6,idx:15}],[{note:"C",octave:6,idx:16},{note:"F",octave:5,idx:17},{note:"A",octave:5,idx:18},{note:"D",octave:6,idx:19}],[{note:"Db",octave:6,idx:20},{note:"Gb",octave:5,idx:21},{note:"Bb",octave:5,idx:22},{note:"Eb",octave:6,idx:23}],[{note:"D",octave:6,idx:24},{note:"G",octave:5,idx:25},{note:"B",octave:5,idx:26},{note:"E",octave:6,idx:27}],[{note:"Eb",octave:6,idx:28},{note:"Ab",octave:5,idx:29},{note:"C",octave:6,idx:30},{note:"F",octave:6,idx:31}],[{note:"E",octave:6,idx:32},{note:"A",octave:5,idx:33},{note:"Db",octave:6,idx:34},{note:"Gb",octave:6,idx:35}],[{note:"F",octave:6,idx:36},{note:"Bb",octave:5,idx:37},{note:"D",octave:6,idx:38},{note:"G",octave:6,idx:39}],[{note:"Gb",octave:6,idx:40},{note:"B",octave:5,idx:42},{note:"Eb",octave:6,idx:43},{note:"Ab",octave:6,idx:44}],[{note:"G",octave:6,idx:45},{note:"C",octave:6,idx:46},{note:"E",octave:6,idx:47},{note:"A",octave:6,idx:48}]]));return Object(O.jsx)("div",{className:"pv4",children:Object(O.jsx)("div",{className:"relative dib h4 w-50",children:Object(O.jsx)("div",{className:"ukulele",children:c.map((function(e,c){var i=5===c||7===c||10===c;return Object(O.jsxs)("div",{className:0===c?"fret-strings":"fret",children:[i&&Object(O.jsx)("span",{className:"fret-marker"}),e.map((function(e){var i="".concat(e.note).concat(e.octave);return Object(O.jsx)(re,{note:i,synth:a,index:c,state:t,dispatch:n})}))]})}))})})})})),de=(new b.d).toDestination();function le(e){var t=e.note,n=e.identity,a=e.state,c=e.dispatch;return Object(O.jsx)("div",{children:Object(O.jsx)("button",{onMouseDown:function(){null===de||void 0===de||de.triggerAttack("".concat(t)),a.get("isRecording")&&c(new m("ADD_NOTE_TO_SONG",{note:t}))},onMouseUp:function(){return null===de||void 0===de?void 0:de.triggerRelease("".concat(t),"+0.19")},style:{},children:n})})}de.set({detune:-1200});var he=new w("kennethchuson2",(function(e){var t=e.state,n=e.dispatch,a=e.synth,c=Object(f.a)([{note:"G5",idx:0},{note:"F5",idx:.5},{note:"E5",idx:1},{note:"D5",idx:1.5},{note:"B4",idx:2},{note:"C5",idx:0},{note:"D5",idx:.5},{note:"E5",idx:1},{note:"F5",idx:1.5}]);return Object(O.jsxs)("div",{className:"pv5",children:[Object(O.jsx)("div",{className:"pl4 pt4 flex"}),Object(O.jsx)("div",{className:"Kalimba_main",children:Object(O.jsx)("div",{style:{backgroundImage:'url("https://cdn-icons-png.flaticon.com/512/3100/3100511.png")',backgroundRepeat:"no-repeat",right:"50px"},children:Object(O.jsx)("div",{style:{height:"500px",width:"320px"},children:Object(O.jsx)("div",{className:"keys",style:{margin:"auto",width:"60%",padding:"30px",display:"flex"},children:Object(f.c)(1,2).map((function(e){return c.map((function(c){var i="".concat(c.note);return Object(O.jsx)(le,{note:i,synth:a,octave:e,identity:c.note,index:7*(e-2)+c.idx,state:t,dispatch:n},i)}))}))})})})})]})})),be=(new b.b).toDestination();function ve(e){var t=e.note,n=e.minor,a=e.index,c=e.state,i=e.dispatch;return Object(O.jsx)("div",{onMouseDown:function(){null===be||void 0===be||be.triggerAttack("".concat(t)),c.get("isRecording")&&i(new m("ADD_NOTE_TO_SONG",{note:t}))},onMouseUp:function(){return null===be||void 0===be?void 0:be.triggerRelease("+0.32")},className:S()("ba pointer absolute dim",{"black bg-white h4":!n}),style:{top:6,left:"".concat(5*a,"rem"),zIndex:n?4:2,width:n?"2rem":"5rem",height:n?"2rem":"5rem",borderRadius:44,marginLeft:n?"0.25rem":25}})}var je=new w("schrodobaggins",(function(e){var t=e.state,n=e.dispatch,a=e.synth,c=Object(f.a)([[{note:"Ab",octave:6,idx:9},{note:"Db",octave:6,idx:1},{note:"F",octave:6,idx:2},{note:"Bb",octave:4,idx:3}],[{note:"A",octave:4,idx:4},{note:"D",octave:4,idx:5},{note:"Gb",octave:6,idx:6},{note:"B",octave:6,idx:7}],[{note:"Bb",octave:6,idx:8},{note:"Eb",octave:6,idx:9}]]);return Object(O.jsx)("div",{className:"pv4",children:Object(O.jsxs)("div",{className:"relative dib h4 w-50",children:[Object(O.jsxs)("div",{className:"flute",children:[c.map((function(e){return Object(O.jsx)("div",{className:"blow",children:e.map((function(e){var c="".concat(e.note).concat(e.octave);return Object(O.jsx)(ve,{note:c,synth:a,index:e.idx,state:t,dispatch:n})}))})})),Object(O.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Pan_flute.svg/868px-Pan_flute.svg.png",alt:"Pan",style:{margin:"10px",width:"650px",borderRadius:"30px",objectFit:"scale-down",marginBottom:"15px",alignSelf:"center"}})]}),Object(O.jsx)("div",{className:"pl4 pt4 flex"})]})})})),xe=new Q("Waveform",(function(e,t){var n=window.innerWidth,a=window.innerHeight/2,c=Math.min(n,a);e.background(0,0,0,255),e.strokeWeight(.01*c),e.stroke(255,255,255,255),e.noFill();var i=t.getValue();e.beginShape();for(var s=0;s<i.length;s++){var o=i[s],r=e.map(s,0,i.length-1,0,n),u=a/2+o*a;e.vertex(r,u)}e.endShape()})),pe=n(3),fe=[],me=function(){function e(t){Object(x.a)(this,e),this.position=void 0,this.velocity=void 0,this.acc=void 0,this.w=void 0,this.color=void 0,this.position=Object.getPrototypeOf(t).constructor.Vector.random2D().mult(250),this.velocity=t.createVector(0,0),this.acc=this.position.copy().mult(t.random(.001,1e-4)),this.w=t.random(3,5),this.color=[t.random(200,255),t.random(200,255),t.random(200,255)]}return Object(pe.a)(e,[{key:"update",value:function(){this.velocity.add(this.acc),this.position.add(this.velocity)}},{key:"edges",value:function(e,t){return this.position.x<-e/2||this.position.x>e/2||this.position.y<-t/2||this.position.y>t/2}},{key:"show",value:function(e){e.noStroke(),e.fill(this.color),e.ellipse(this.position.x,this.position.y,this.w)}}]),e}(),ge=new Q("mitchthebaker",(function(e,t){var n=window.innerWidth/2,a=window.innerHeight;e.background(0),e.stroke(255),e.strokeWeight(3),e.noFill(),e.translate(n/2,a/2);for(var c=t.getValue(),i=-1;i<=1;i+=2){e.beginShape();for(var s=0;s<=180;s+=.5){var o=Math.floor(e.map(s,0,180,0,c.length-1)),r=e.map(Number(c[o]),-1,1,150,350),u=r*e.sin(s)*i,d=r*e.cos(s);e.vertex(u,d)}e.endShape()}var l=new me(e);fe.push(l);for(var h=fe.length-1;h>=0;h--)fe[h].edges(n,a)?fe.splice(h,1):(fe[h].update(),fe[h].show(e))})),Oe=new Q("kennethchuson2",(function(e,t){var n=window.innerWidth,a=window.innerHeight/2,c=Math.min(n,a),i=["rgb(0,255,0)","rgb(195,4,4)","rgb(42,13,191)","rgba(0,234,242)"];e.background("#4F1B77"),e.strokeWeight(.03*c);for(var s=i.length-1;s>0;s--){var o=Math.floor(Math.random()*(s+1)),r=i[s];i[s]=i[o],i[o]=r,e.stroke(i[s])}var u=t.getValue();e.translate(n/2,a/2),e.beginShape();for(var d=0;d<u.length;d++){var l=u[d],h=l*Math.cos(d)*n/1.15,b=l*Math.sin(d)*a/1.15;e.point(h,b)}e.endShape()})),we=new Q("Schrodobaggins",(function(e,t){var n=window.innerWidth,a=window.innerHeight/2;e.background(0),e.fill(255),e.noStroke();var c=t.getValue();e.text("Amplitude: "+c,30,65),e.text("mapMax: 1",30,80),e.beginShape();for(var i=0;i<c.length;i++){var s=c[i],o=e.map(1.25*s,.5,c.length/50,a,n);e.ellipse(n/2,o,50,50)}e.endShape()})),Ne=Object(f.a)([oe,ue,he,je]),ke=Object(f.a)([xe,ge,Oe,we]),ye=Object(f.b)({instruments:Ne,visualizers:ke,isRecording:!1,openPopup:!1,songTitle:""}),Se=n(10),Ee=n(29),Re=n(66),Ce=["error"],De={transports:["websocket"],path:"/ws",autoConnect:!0,reconnection:!0,timeout:1e4},Te=1;function _e(e,t,n){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(u.a)(r.a.mark((function e(t,n,a){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Te++,e.abrupt("return",new Promise((function(e,i){t.once("".concat(n,".").concat(c),(function(t){var n=t.error,a=Object(Ee.a)(t,Ce);a?e(a):i(n)})),t.emit(n,Object(Se.a)({_id:c},a))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(115);var Ae=function(){var e=Object(a.useReducer)(g,ye),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){!function(e,t){var n=Object(Re.a)("ws://localhost:3001",De);n.on("connect",(function(){return e(n)})),n.on("disconnect",t)}(function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(new m("SET_SOCKET",{socket:t})),e.next=3,_e(t,"get_songs",{});case 3:n=e.sent,a=n.songs,c(new m("SET_SONGS",{songs:a}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(){c(new m("DELETE_SOCKET"))}))}),[]),Object(O.jsx)(l.a,{children:Object(O.jsxs)(h.c,{children:[Object(O.jsx)(h.a,{path:"/",children:Object(O.jsx)(ce,{state:n,dispatch:c})}),Object(O.jsx)(h.a,{path:"/:instrument",children:Object(O.jsx)(ce,{state:n,dispatch:c})}),Object(O.jsx)(h.a,{path:"*",children:Object(O.jsx)("div",{children:"404"})})]})})};n(116),n(117);var Pe=document.getElementById("root");s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(Ae,{})}),Pe,(function(){console.log("React has loaded.")}))},82:function(e,t,n){},83:function(e,t,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.bf73af6c.chunk.js.map