{"version":3,"sources":["Reducer.tsx","Instruments.tsx","utils/apiCreators.ts","SideNav.tsx","Visualizers.tsx","MainPage.tsx","instruments/Piano.tsx","instruments/mitchthebaker.tsx","instruments/kennethchuson2.tsx","instruments/schrodobaggins.tsx","visualizers/Waveform.tsx","visualizers/mitchthebaker.tsx","visualizers/kennethchuson2.tsx","visualizers/MichaelWaveform.tsx","State.tsx","Socket.tsx","App.tsx","index.tsx"],"names":["DispatchAction","type","args","this","fromJS","appReducer","state","action","console","debug","newState","oldSocket","get","close","set","delete","songs","log","notes","find","s","pathname","getIn","search","instrumentName","substring","visualizerName","URLSearchParams","instruments","visualizers","instrument","i","name","visualizer","v","isRecording","openPopup","song","note","songCopy","error","toJS","update","Instrument","component","TopNav","className","InstrumentContainer","dispatch","InstrumentComponent","useState","Tone","oscillator","toDestination","synth","setSynth","useEffect","eachNote","split","noteObjs","map","idx","time","velocity","value","triggerAttackRelease","length","start","cancel","style","top","getSongs","a","axios","headers","res","status","data","getSong","songTitle","updateSong","newTitle","songId","put","params","addSong","body","song_title","post","deleteSong","Section","title","children","RadioButton","to","text","active","onClick","classNames","fw7","RecordingButton","UpdateAndDeleteButton","isShowingUD","React","setNewTitle","handleSubmit","e","preventDefault","handleDelete","onSubmit","onChange","target","placeholder","hidden","Instruments","activeInstrument","location","useLocation","Visualizers","activeVisualizer","Search","handleSearchChange","autoComplete","Song","setIsShowingUD","undefined","id","Songs","searchTerm","List","filter","includes","RecordingButtons","startRecording","setStartRecording","stopRecording","setStopRecording","setTimeout","SideNav","setSearchTerm","Visualizer","draw","VisualizerContainer","setCircumference","analyzer","useMemo","onResize","useCallback","p5","width","window","innerWidth","height","innerHeight","resizeCanvas","volume","connect","disconnect","setup","canvasParentRef","createCanvas","parent","angleMode","DEGREES","windowResized","InstrumentPanel","VisualizerPanel","InstrumentAndVisualizer","left","RecordingPopup","open","closeOnDocumentClick","RecordingForm","submitting","setSubmitting","submitted","setSubmitted","input","setInput","ShowWelcome","MainPage","isWelcome","PianoKey","minor","index","onMouseDown","triggerAttack","onMouseUp","triggerRelease","zIndex","marginLeft","PianoType","PianoInstrument","keys","oscillators","Range","octave","key","isMinor","indexOf","o","newType","oldSynth","UkuleleFret","mitchthebakerInstrument","standard_tuning_1frets","fret","marker","aFret","Polysynth","identity","detune","KalimbaInstrument","backgroundImage","backgroundRepeat","right","margin","padding","display","Monosynth","FluteKey","borderRadius","FluteInstrument","flute","blow","src","alt","objectFit","marginBottom","alignSelf","WaveformVisualizer","dim","Math","min","background","strokeWeight","stroke","noFill","values","getValue","beginShape","amplitude","x","y","vertex","endShape","particles","Particle","position","acc","w","color","Object","getPrototypeOf","constructor","Vector","random2D","mult","createVector","copy","random","add","noStroke","fill","ellipse","mitchthebakerVisualizer","translate","wave","t","floor","r","Number","sin","cos","p","push","edges","splice","show","KennethVisualizer","arr_colors","temp","point","MichaelWaveformVisualizer","ellipseHeight","defaultState","Map","SOCKET_OPTS","transports","path","autoConnect","reconnection","timeout","idCounter","send","socket","msg","_id","Promise","resolve","reject","once","resp","success","emit","App","useReducer","onConnect","onDisconnect","newSocket","on","initializeSocket","rootEl","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.bf73af6c.chunk.js","sourcesContent":["// 3rd party\nimport { List, Map, fromJS } from 'immutable';\n\n// project deps\nimport { Instrument } from './Instruments';\nimport { Visualizer } from './Visualizers';\nimport { AppState } from './State';\n\n/** ------------------------------------------------------------------------ **\n * All user input is handled by DispatchAction.\n ** ------------------------------------------------------------------------ */\n\n/**\n * Observation: pure map (compare and contrast with impure map)\n *\n * 'instrument': Instrument\n * 'visualizer': Visualizer\n * 'songs': List<string>\n * 'notes': List<{id: number, songTitle: string, notes: string}>\n */\ntype DispatchArgs = {\n  [key: string]: any;\n};\n\n// A simple algebraic data-type with string literal types\ntype DispatchActionType =\n  | 'SET_SOCKET'\n  | 'DELETE_SOCKET'\n  | 'SET_SONGS'\n  | 'PLAY_SONG'\n  | 'STOP_SONG'\n  | 'SET_LOCATION'\n  | 'TRIGGER_RECORDING'\n  | 'GET_RECORDING_STATUS'\n  | 'RECORD_A_SONG'\n  | 'TRIGGER_RECORDING_POPUP'\n  | 'ADD_NOTE_TO_SONG';\n\nexport class DispatchAction {\n  readonly type: DispatchActionType;\n  readonly args: Map<string, any>;\n\n  constructor(type: DispatchActionType, args?: DispatchArgs) {\n    this.type = type;\n    this.args = fromJS(args) as Map<string, any>;\n  }\n}\n\n/** ------------------------------------------------------------------------ **\n * Top-level application reducer.\n ** ------------------------------------------------------------------------ */\n\nexport function appReducer(state: AppState, action: DispatchAction): AppState {\n  const { type, args } = action;\n\n  console.debug(`${type}`);\n\n  // Question: Does this function remind of you registering callbacks?\n  const newState = (() => {\n    switch (type) {\n      case 'SET_SOCKET': {\n        const oldSocket = state.get('socket');\n        if (oldSocket) {\n          oldSocket.close();\n        }\n\n        return state.set('socket', args.get('socket'));\n      }\n      \n      case 'DELETE_SOCKET': {\n        return state.delete('socket');\n      }\n      \n      case 'SET_SONGS': {\n        const songs = args.get('songs');\n        console.log(songs);\n        return state.set('songs', songs);\n      }\n      \n      case 'PLAY_SONG': {\n        const notes = state\n          .get('songs')\n          .find((s: any) => s.get('id') === args.get('id'))\n          .get('notes');\n        return state.set('notes', notes);\n      }\n      \n      case 'STOP_SONG': {\n        return state.delete('notes');\n      }\n      \n      case 'SET_LOCATION': {\n        const pathname = args.getIn(['location', 'pathname'], '') as string;\n        const search = args.getIn(['location', 'search'], '') as string;\n\n        const instrumentName: string = pathname.substring(1);\n        const visualizerName: string =\n          new URLSearchParams(search.substring(1)).get('visualizer') ?? '';\n        const instruments: List<Instrument> = state.get('instruments');\n        const visualizers: List<Visualizer> = state.get('visualizers');\n\n        const instrument = instruments.find(i => i.name === instrumentName);\n        const visualizer = visualizers.find(v => v.name === visualizerName);\n\n        return state\n          .set('instrument', instrument)\n          .set('visualizer', visualizer);\n      }\n      \n      case 'TRIGGER_RECORDING': {\n        const isRecording = args.get('isRecording');\n\n        return state.set('isRecording', !isRecording);\n      }\n\n      case 'TRIGGER_RECORDING_POPUP': {\n        const openPopup = args.get('openPopup');\n\n        return state.set('openPopup', !openPopup);\n      }\n\n      case 'RECORD_A_SONG': {\n        const song: string[] = args.get('song');\n\n        return state.set('song', song);\n      }\n\n      case 'ADD_NOTE_TO_SONG': {\n        const note: string = args.get('note');\n        let songCopy: string[] = state.get('song');\n            songCopy = [...songCopy, note];\n\n        return state.set('song', songCopy);\n      }\n\n      default:\n        console.error(`type unknown: ${type}\\n`, args.toJS());\n        return state;\n    }\n  })();\n\n  console.debug(newState.update('socket', s => (s ? '[socket]' : s)).toJS());\n\n  return newState;\n}\n","// 3rd party library imports\nimport React, { useState, useEffect } from 'react';\nimport * as Tone from 'tone';\n\n// project imports\nimport { DispatchAction } from './Reducer';\nimport { AppState } from './State';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of an Instruments.\n ** ------------------------------------------------------------------------ */\n\nexport interface InstrumentProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n  name: string;\n  synth: Tone.Synth;\n  setSynth: (f: (oldSynth: Tone.Synth) => Tone.Synth) => void;\n}\n\nexport class Instrument {\n  public readonly name: string;\n  public readonly component: React.FC<InstrumentProps>;\n\n  constructor(name: string, component: React.FC<InstrumentProps>) {\n    this.name = name;\n    this.component = component;\n  }\n}\n\nfunction TopNav({ name }: { name: string }) {\n  return (\n    <div\n      className={\n        'w-100 h3 bb b--light-gray flex justify-between items-center ph4'\n      }\n    >\n      <div>{name}</div>\n    </div>\n  );\n}\n\ninterface InstrumentContainerProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n  instrument: Instrument;\n}\n\nexport const InstrumentContainer: React.FC<InstrumentContainerProps> = ({\n  instrument,\n  state,\n  dispatch,\n}: InstrumentContainerProps) => {\n  const InstrumentComponent = instrument.component;\n  const [synth, setSynth] = useState(\n    new Tone.Synth({\n      oscillator: { type: 'sine' } as Tone.OmniOscillatorOptions,\n    }).toDestination(),\n  );\n\n  const notes = state.get('notes');\n\n  useEffect(() => {\n    if (notes && synth) {\n      let eachNote = notes.split(' ');\n      let noteObjs = eachNote.map((note: string, idx: number) => ({\n        idx,\n        time: `+${idx / 4}`,\n        note,\n        velocity: 1,\n      }));\n\n      new Tone.Part((time, value) => {\n        // the value is an object which contains both the note and the velocity\n        synth.triggerAttackRelease(value.note, '4n', time, value.velocity);\n        if (value.idx === eachNote.length - 1) {\n          dispatch(new DispatchAction('STOP_SONG'));\n        }\n      }, noteObjs).start(0);\n\n      Tone.Transport.start();\n\n      return () => {\n        Tone.Transport.cancel();\n      };\n    }\n\n    return () => {};\n  }, [notes, synth, dispatch]);\n\n  return (\n    <div>\n      <TopNav name={instrument.name} />\n      <div\n        className={'bg-white absolute right-0 left-0'}\n        style={{ top: '4rem' }}\n      >\n        <InstrumentComponent\n          name={instrument.name}\n          state={state}\n          dispatch={dispatch}\n          synth={synth}\n          setSynth={setSynth}\n        />\n      </div>\n    </div>\n  );\n};\n","import { DispatchAction } from '../Reducer';\nimport axios from 'axios';\nimport React from 'react';\n\nexport const getSongs = async (dispatch: React.Dispatch<DispatchAction>) => {\n    try {\n        const res = await axios.get('/api/songs', {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });    \n\n        if(res.status === 200) {\n            dispatch(new DispatchAction('SET_SONGS', { songs: res.data.songs }));\n        }\n    }\n    catch(err) {\n        console.error(err);\n    }\n};\n\nexport const getSong = async (dispatch: React.Dispatch<DispatchAction>,\n                              songTitle: string) => {\n    try {\n        const res = await axios.get(`/api/songs/${songTitle}`, {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n      \n        if(res.status === 200) {\n            dispatch(new DispatchAction('SET_SONGS', { songs: res.data.songs }));\n        }\n    }\n    catch(err) {\n      console.error(err);\n    }\n};\n\nexport const updateSong = async(dispatch: React.Dispatch<DispatchAction>,\n                                newTitle: string,\n                                songId: number) => {\n    try {\n        const res = await axios.put(`/api/songs/${songId}`, null, { params: { newTitle: newTitle } });\n\n        if(res.status === 200) {\n            await getSongs(dispatch);\n        }\n    }\n    catch(err) {\n        console.error(err);\n    }\n};\n\nexport const addSong = async (dispatch: React.Dispatch<DispatchAction>, \n                              songTitle: string, \n                              song: string[]) => {\n    try {\n        const body = {\n            song_title: songTitle,\n            song: song,  \n        };\n\n        const res = await axios.post('/api/songs', body, {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n        \n        // successful creation of new song\n        if(res.status === 201) {\n            await getSongs(dispatch);\n        }\n    }\n    catch(err) {\n        console.error(err);\n    }\n};\n\nexport const deleteSong = async(dispatch: React.Dispatch<DispatchAction>,\n                                songId: number) => {\n    try {\n        const res = await axios.delete(`/api/songs/${songId}`);\n\n        if(res.status === 200) {\n        await getSongs(dispatch);\n        }\n    }\n    catch(err) {\n        console.error(err);\n    }\n};","// 3rd party library imports\nimport classNames from 'classnames';\nimport { List, Map } from 'immutable';\nimport React from 'react';\nimport { useLocation, Link } from 'react-router-dom';\nimport {\n  RadioButton20,\n  RadioButtonChecked20,\n  Music20,\n  TrashCan20,\n  OverflowMenuHorizontal20,\n} from '@carbon/icons-react';\n\n// project imports\nimport { DispatchAction } from './Reducer';\nimport { AppState } from './State';\nimport { Instrument } from './Instruments';\nimport { Visualizer } from './Visualizers';\nimport './css/ud-menu.css';\nimport './css/recording_button.css';\nimport { getSong, updateSong, deleteSong, getSongs } from './utils/apiCreators';\n\n/** ------------------------------------------------------------------------ **\n * All the components in the side navigation.\n ** ------------------------------------------------------------------------ */\n\ninterface SideNavProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n  isShowingUD?: boolean;\n  songId?: number;\n  song?: Map<any, any>; \n  handleSearchChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  searchTerm?: string;\n}\n\ninterface SearchProps {\n  handleSearchChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nconst Section: React.FC<{ title: string }> = ({ title, children }) => {\n  return (\n    <div className=\"flex flex-column h-25 bb b--light-gray pa3\">\n      <div className=\"fw7 mb2\">{title} </div>\n      <div className=\"flex-auto overflow-auto\">{children}</div>\n    </div>\n  );\n};\n\ninterface RadioButtonProps {\n  to: any,\n  text: string,\n  active: boolean,\n  onClick: () => void\n}\n\n// isActive will change the text contained in the record button\n// onClick will dispatch to redux action in Reducer.tsx\ninterface RecordingButtonProps {\n  isRecording: boolean,\n  onClick: () => void\n}\n\nfunction RadioButton({ to, text, active, onClick }: RadioButtonProps): JSX.Element {\n  return (\n    <Link to={to} className=\"no-underline\">\n      <div\n        className={classNames('f7 flex items-center black', { fw7: active })}\n        onClick={onClick}\n      >\n        {active ? (\n          <RadioButtonChecked20 className=\"mr1\" />\n        ) : (\n          <RadioButton20 className=\"mr1\" />\n        )}\n        <div className=\"dim\">{text}</div>\n      </div>\n    </Link>\n  );\n}\n\nfunction RecordingButton({ isRecording, onClick }: RecordingButtonProps): JSX.Element {\n  return (\n    <div className=\"recording-buttons\">\n      <button className=\"recording-button\" onClick={onClick}>\n        {isRecording ? \"Stop\" : \"Record\"}\n      </button>\n    </div>\n  );\n}\n\nfunction UpdateAndDeleteButton({state, dispatch, songId, isShowingUD}: SideNavProps): JSX.Element {\n\n  const [newTitle, setNewTitle] = React.useState('');\n\n  const handleSubmit = async (e: React.ChangeEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    if(songId)\n      await updateSong(dispatch, newTitle, songId);\n\n    setNewTitle('');\n  };\n\n  const handleDelete = async () => {\n    if(songId)\n      await deleteSong(dispatch, songId);\n  };\n\n  const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) => setNewTitle(e.target.value);\n\n  return (\n    <div className=\"ud-menu\">\n      { isShowingUD && (\n        <div className=\"ud-menu-content\">\n          <form className=\"update-form\" onSubmit={handleSubmit}>\n            <fieldset className=\"update-form-fieldset\">\n              <label>\n                <input\n                    value={newTitle}\n                    onChange={handleTitleChange}\n                    type=\"text\"\n                    placeholder=\"Edit the song title\"\n                />\n                <input type=\"submit\" hidden /> \n              </label>\n            </fieldset>\n          </form>\n          <TrashCan20 \n            className=\"delete-icon dim\"\n            onClick={handleDelete}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction Instruments({ state }: SideNavProps): JSX.Element {\n  const instruments: List<Instrument> = state.get('instruments');\n  const activeInstrument = state.get('instrument')?.name;\n  const location = useLocation();\n\n  return (\n    <Section title=\"Instruments\">\n      {instruments.map(i => (\n        <RadioButton\n          key={i.name}\n          to={`/${i.name}${location.search}`}\n          text={i.name}\n          active={i.name === activeInstrument}\n          onClick={() => console.log(i.name)}\n        />\n      ))}\n    </Section>\n  );\n}\n\nfunction Visualizers({ state }: SideNavProps): JSX.Element {\n  const visualizers: List<Visualizer> = state.get('visualizers');\n  const activeVisualizer = state.get('visualizer')?.name;\n  const location = useLocation();\n\n  return (\n    <Section title=\"Visualizers\">\n      {visualizers.map(v => (\n        <RadioButton\n          key={v.name}\n          to={{\n            pathname: location.pathname,\n            search: `?visualizer=${v.name}`,\n          }}\n          text={v.name}\n          active={v.name === activeVisualizer}\n          onClick={() => console.log(v.name)}\n        />\n      ))}\n    </Section>\n  );\n}\n\nfunction Search({handleSearchChange}: SearchProps): JSX.Element {\n  const handleSubmit = (e: React.ChangeEvent<HTMLFormElement>) => {\n    e.preventDefault();\n  };\n  \n  return (\n    <form onSubmit={handleSubmit}>\n      <fieldset className=\"form-fieldset\">\n        <label>\n          <input \n            type=\"text\"\n            name=\"search\"\n            onChange={handleSearchChange}\n            placeholder=\"Search\"\n            autoComplete=\"off\"\n          />\n          <input type=\"submit\" hidden />\n        </label>\n      </fieldset>\n    </form>\n  );\n}\n\nfunction Song({state, dispatch, songId, song}: SideNavProps): JSX.Element {\n\n  // UD is an abbreviation for update/delete \n  const [isShowingUD, setIsShowingUD] = React.useState(false);  \n\n  return ( \n    (song !== undefined) ? \n      <div className=\"song-wrapper\">\n        <div className=\"inline-flex w-100\">\n          <div\n            key={song.get('id')}\n            className=\"f7 pointer song underline no-underline i\"\n            onClick={() =>\n              dispatch(new DispatchAction('PLAY_SONG', { id: song.get('id') }))\n            }\n          >\n            <div className=\"song-content dim\">\n              <Music20 className=\"mr1\" />\n              {song.get('songTitle')}\n            </div>\n          </div>\n          <div className=\"overflow-menu\">\n            <OverflowMenuHorizontal20 \n              onClick={() => setIsShowingUD(!isShowingUD)}\n              className=\"dim\"\n            />\n          </div>\n        </div>\n        \n        <UpdateAndDeleteButton state={state} dispatch={dispatch} songId={songId} isShowingUD={isShowingUD}/>\n      </div> \n      : <> </>\n  );\n}\n\nfunction Songs({ state, dispatch, searchTerm }: SideNavProps): JSX.Element {\n  const songs: List<any> = state.get('songs', List());\n\n  return (\n    <Section title=\"Playlist\">\n      {songs\n        .filter(song => song.get('songTitle').includes(searchTerm))\n        .map(song => {\n        const songId: number = song.get('id');\n\n        return (\n          <Song state={state} dispatch={dispatch} song={song} songId={songId}/>\n        );\n      })}\n    </Section>\n  );\n}\n\nfunction RecordingButtons({ state, dispatch }: SideNavProps): JSX.Element {\n  const isRecording: boolean = state.get('isRecording');\n  const openPopup: boolean = state.get('openPopup');\n  const [startRecording, setStartRecording] = React.useState(false);\n  const [stopRecording, setStopRecording] = React.useState(false);\n\n  return (\n    <Section title=\"Record a Song\">\n      <RecordingButton\n        onClick={() => {\n          // notify redux and update state for whether the user is recording or not \n          dispatch(new DispatchAction('TRIGGER_RECORDING', {\n            isRecording: isRecording\n          }));\n\n          // create some sort of condition here if isRecording is set to true\n          if(!state.get('isRecording')) {\n            setStartRecording(true);\n\n            // notify redux that a new song should be created\n            // a song should simply hold a list of the notes clicked by the user \n            dispatch(new DispatchAction('RECORD_A_SONG', {\n              song: []\n            }));\n          }\n          else {\n            // stop recording a song and add song to db\n            setStartRecording(false);\n            setStopRecording(true);\n\n            setTimeout(() => {\n              setStopRecording(false);\n            }, 3000);\n\n            // if a recording is stopped, then open the popup menu where the song title will be input\n            dispatch(new DispatchAction('TRIGGER_RECORDING_POPUP', {\n              openPopup: openPopup\n            }));\n          }\n        }}\n        isRecording={isRecording}\n      />\n      <div className=\"recording-button-message-wrapper\">\n        {startRecording && \n          <div className=\"recording-button-message\">\n            <div className=\"blinking-record-icon\">  </div>\n            <p> Your recording is live </p>\n          </div>\n        }\n        {stopRecording && <p> Your recording has stopped </p>}\n      </div>\n    </Section>\n  );\n}\n\nexport function SideNav({ state, dispatch }: SideNavProps): JSX.Element {\n  const [searchTerm, setSearchTerm] = React.useState('');\n\n  const handleSearchChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if(e.target.value === '') {\n      // clear searched songs from state\n      await getSongs(dispatch);\n      setSearchTerm('');\n      return;\n    }\n\n    if(searchTerm.includes(e.target.value)) {\n      // if the new search value is already in search term, another API is not necessary\n      setSearchTerm(e.target.value);\n      return;\n    }\n\n    await getSong(dispatch, e.target.value);\n    setSearchTerm('');\n  };\n  \n  return (\n    <div className=\"absolute top-0 left-0 bottom-0 w5 z-1 shadow-1 bg-white flex flex-column\">\n      <div className=\"h3 fw7 f5 flex items-center pl3 bb b--light-gray\">\n        Quadtuplets\n      </div>\n      <div className=\"flex-auto\">\n        <Instruments state={state} dispatch={dispatch} />\n        <Visualizers state={state} dispatch={dispatch} />\n        <Search handleSearchChange={handleSearchChange}/>\n        <Songs state={state} dispatch={dispatch} searchTerm={searchTerm}/>\n        <RecordingButtons state={state} dispatch={dispatch}/>\n      </div>\n    </div>\n  );\n}\n","// 3rd party library imports\nimport * as Tone from 'tone';\nimport Sketch from 'react-p5';\nimport P5 from 'p5';\nimport { useEffect, useMemo, useCallback } from 'react';\n//import mandelbrot_set from './img/mandelbrot_set.png';\n\ntype VisualizerDrawer = (p5: P5, analyzer: Tone.Analyser) => void;\n\ninterface VisualizerContainerProps {\n  visualizer: Visualizer;\n}\n\nexport class Visualizer {\n  public readonly name: string;\n  public readonly draw: VisualizerDrawer;\n\n  constructor(name: string, draw: VisualizerDrawer) {\n    this.name = name;\n    this.draw = draw;\n  }\n}\n\nexport function VisualizerContainer({ visualizer }: VisualizerContainerProps) {\n\n  const { name, draw } = visualizer;\n\n  let setCircumference = (name === \"Circumference\") ? true : false;\n\n  const analyzer: Tone.Analyser = useMemo(\n    () => new Tone.Analyser('waveform', 256),\n    [],\n  );\n\n  const onResize = useCallback((p5: P5) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n\n    p5.resizeCanvas(width, height, false);\n  }, []);\n\n  useEffect(() => {\n    Tone.getDestination().volume.value = -5;\n    Tone.getDestination().connect(analyzer);\n    return () => {\n      Tone.getDestination().disconnect(analyzer);\n    };\n  }, [analyzer]);\n\n  const setup = (p5: P5, canvasParentRef: Element) => {\n    const width = (setCircumference) ? window.innerWidth / 2 : window.innerWidth;\n    const height = (setCircumference) ? window.innerHeight : window.innerHeight / 2; \n    p5.createCanvas(width, height).parent(canvasParentRef);\n    p5.angleMode(p5.DEGREES);\n  };\n\n  return (\n    <div className={setCircumference ? 'bg-grey absolute right-0 h-100 w-50' : 'bg-black absolute bottom-0 right-0 left-0 h-50'}>\n      <div className={'z-1 absolute left-0 top-0 pa4 white f5'}>{name}</div>\n      <Sketch\n        setup={setup}\n        draw={p5 => draw(p5, analyzer)}\n        windowResized={onResize}\n        className={setCircumference ? 'circumference-visualizer' : ''}\n      />\n    </div>\n  );\n}\n","// 3rd party library imports\nimport React, { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport * as Tone from 'tone';\nimport { Music32 } from '@carbon/icons-react';\nimport Popup from 'reactjs-popup';\n\n// project imports\nimport { InstrumentContainer } from './Instruments';\nimport { AppState } from './State';\nimport { DispatchAction } from './Reducer';\nimport { SideNav } from './SideNav';\nimport { VisualizerContainer } from './Visualizers';\nimport \"./css/recording_popup.css\";\nimport { addSong } from './utils/apiCreators';\n\ntype PanelProps = {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n};\n\n/** ------------------------------------------------------------------------ **\n * Instrument and visualizer component\n ** ------------------------------------------------------------------------ */\n\nfunction InstrumentPanel({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component is the top-level for the instrument.\n   */\n  const instrument = state.get('instrument');\n\n  return (\n    <div>\n      {instrument && (\n        <InstrumentContainer\n          state={state}\n          dispatch={dispatch}\n          instrument={instrument}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction VisualizerPanel({ state }: PanelProps): JSX.Element {\n  /**\n   * This React component is the top-level for the visualizer.\n   */\n  const visualizer = state.get('visualizer');\n\n  return (\n    <div>\n      {visualizer && (\n        <VisualizerContainer key={visualizer.name} visualizer={visualizer} />\n      )}\n    </div>\n  );\n}\n\nfunction InstrumentAndVisualizer({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component bundles the instrument panel and visualizer panel together.\n   */\n\n  return (\n    <div\n      className=\"absolute right-0 bottom-0 top-0 flex flex-column\"\n      style={{ left: '16rem' }}\n    >\n      <InstrumentPanel state={state} dispatch={dispatch} />\n      <VisualizerPanel state={state} dispatch={dispatch} />\n      <RecordingPopup state={state} dispatch={dispatch} />\n    </div>\n  );\n}\n\nfunction RecordingPopup({state, dispatch}: PanelProps): JSX.Element {\n  /**\n   * This React component will be displayed after a song has been finished recording.\n   */\n\n  const openPopup: boolean = state.get('openPopup');\n\n  const closeModal = () => dispatch(new DispatchAction('TRIGGER_RECORDING_POPUP', {\n    openPopup: openPopup\n  }));\n\n  return (\n    <Popup open={openPopup} closeOnDocumentClick>\n      <div className=\"modal\">\n        <button className=\"close close-modal\" onClick={closeModal}>\n          &times;\n        </button>\n        <RecordingForm state={state} dispatch={dispatch}/>\n      </div>\n    </Popup>\n  );\n}\n\nfunction RecordingForm({state, dispatch}: PanelProps): JSX.Element {\n  const [submitting, setSubmitting] = React.useState(false);\n  const [submitted, setSubmitted] = React.useState(false);\n  const [input, setInput] = React.useState('');\n\n  const handleSubmit = async (e: React.ChangeEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setSubmitting(true);\n\n    // submit value entered into form input to state to finalize creation of song \n    await addSong(dispatch, input, state.get('song'));\n\n    setTimeout(() => {\n      setSubmitting(false);\n      setSubmitted(true);\n\n      setTimeout(() => {\n        setSubmitted(false);\n        setInput('');\n      }, 3000);\n    }, 3000);\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => setInput(e.target.value);\n\n  return (\n    <form className=\"recording-form\" onSubmit={handleSubmit}>\n      <fieldset className=\"form-fieldset\">\n        <label className=\"form-fieldset-label\">\n          <h3> You're almost done! </h3>\n          <p> As a last step, enter a title for your song recording. </p>\n          <input value={input} onChange={handleInputChange} placeholder=\"Enter a song title\"/>\n        </label>\n      </fieldset>\n      <button className=\"form-button\" type=\"submit\"> Submit </button>\n      <div className=\"form-submission-message\">\n        {submitting && <p> Submitting form... </p>}\n        {submitted && <p> Your song has been submitted! </p>}\n      </div>\n    </form>\n  );\n}\n\nfunction ShowWelcome(): JSX.Element {\n  return (\n    <div\n      className=\"absolute right-0 bottom-0 top-0 flex flex-column items-center justify-center\"\n      style={{ left: '16rem' }}\n    >\n      <div className=\"mw6 lh-copy mb4\">\n        <Music32 />\n        <div className=\"f3 fw7 mb2\">Welcome to the case study.</div>\n        <div className=\"f4 mb3\">\n          Select an instrument and a visualizer on the left to serve some fresh\n          beats.\n        </div>\n        <div className=\"f5\">The UI is yours to design. Express yourself.</div>\n      </div>\n    </div>\n  );\n}\n\n/** ------------------------------------------------------------------------ **\n * Main page component\n ** ------------------------------------------------------------------------ */\n\nexport function MainPage({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component bundles together the entire main page.\n   */\n\n  const location = useLocation();\n  const isWelcome = !state.get('instrument');\n  console.log('INSTRUMENT', isWelcome);\n\n  useEffect(() => {\n    dispatch(new DispatchAction('SET_LOCATION', { location }));\n  }, [dispatch, location]);\n\n  return (\n    <div\n      className=\"fixed top-0 left-0 h-100 w-100 bg-white\"\n      onClick={() => Tone.start()}\n    >\n      <SideNav state={state} dispatch={dispatch} />\n      {isWelcome ? (\n        <ShowWelcome />\n      ) : (\n        <InstrumentAndVisualizer state={state} dispatch={dispatch} />\n      )}\n    </div>\n  );\n}\n","// 3rd party library imports\nimport * as Tone from 'tone';\nimport classNames from 'classnames';\nimport { List, Range } from 'immutable';\nimport React from 'react';\n\n// project imports\nimport { Instrument, InstrumentProps } from '../Instruments';\nimport { DispatchAction } from '../Reducer';\nimport { AppState } from '../State';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Piano.\n ** ------------------------------------------------------------------------ */\n\ninterface PianoKeyProps {\n  note: string; // C, Db, D, Eb, E, F, Gb, G, Ab, A, Bb, B\n  duration?: string;\n  synth?: Tone.Synth; // Contains library code for making sound\n  minor?: boolean; // True if minor key, false if major key\n  octave: number;\n  index: number; // octave + index together give a location for the piano key\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n}\n\nexport function PianoKey({\n  note,\n  synth,\n  minor,\n  index,\n  state,\n  dispatch\n}: PianoKeyProps): JSX.Element {\n  /**\n   * This React component corresponds to either a major or minor key in the piano.\n   * See `PianoKeyWithoutJSX` for the React component without JSX.\n   */\n  return (\n    // Observations:\n    // 1. The JSX refers to the HTML-looking syntax within TypeScript.\n    // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n    // 3. The curly braces `{` and `}` should remind you of string interpolation.\n    <div\n      onMouseDown={() => {\n        synth?.triggerAttack(`${note}`);\n\n        // only add the note into a new song if recording button has been clicked\n        if(state.get('isRecording')) {\n          dispatch(new DispatchAction('ADD_NOTE_TO_SONG', {\n            note: note\n          }));\n        }\n      }} // Question: what is `onMouseDown`?\n      onMouseUp={() => synth?.triggerRelease('+0.25')} // Question: what is `onMouseUp`?\n      className={classNames('ba pointer absolute dim', {\n        'bg-black black h3': minor, // minor keys are black\n        'black bg-white h4': !minor, // major keys are white\n      })}\n      style={{\n        // CSS\n        top: 0,\n        left: `${index * 2}rem`,\n        zIndex: minor ? 1 : 0,\n        width: minor ? '1.5rem' : '2rem',\n        marginLeft: minor ? '0.25rem' : 0,\n      }}\n    ></div>\n  );\n}\n\n// eslint-disable-next-line\nfunction PianoKeyWithoutJSX({\n  note,\n  synth,\n  minor,\n  index,\n}: PianoKeyProps): JSX.Element {\n  /**\n   * This React component for pedagogical purposes.\n   * See `PianoKey` for the React component with JSX (JavaScript XML).\n   */\n  return React.createElement(\n    'div',\n    {\n      onMouseDown: () => synth?.triggerAttack(`${note}`),\n      onMouseUp: () => synth?.triggerRelease('+0.25'),\n      className: classNames('ba pointer absolute dim', {\n        'bg-black black h3': minor,\n        'black bg-white h4': !minor,\n      }),\n      style: {\n        top: 0,\n        left: `${index * 2}rem`,\n        zIndex: minor ? 1 : 0,\n        width: minor ? '1.5rem' : '2rem',\n        marginLeft: minor ? '0.25rem' : 0,\n      },\n    },\n    [],\n  );\n}\n\nfunction PianoType({ title, onClick, active }: any): JSX.Element {\n  return (\n    <div\n      onClick={onClick}\n      className={classNames('dim pointer ph2 pv1 ba mr2 br1 fw7 bw1', {\n        'b--black black': active,\n        'gray b--light-gray': !active,\n      })}\n    >\n      {title}\n    </div>\n  );\n}\n\nfunction Piano({ state, dispatch, synth, setSynth }: InstrumentProps): JSX.Element {\n  const keys = List([\n    { note: 'C', idx: 0 },\n    { note: 'Db', idx: 0.5 },\n    { note: 'D', idx: 1 },\n    { note: 'Eb', idx: 1.5 },\n    { note: 'E', idx: 2 },\n    { note: 'F', idx: 3 },\n    { note: 'Gb', idx: 3.5 },\n    { note: 'G', idx: 4 },\n    { note: 'Ab', idx: 4.5 },\n    { note: 'A', idx: 5 },\n    { note: 'Bb', idx: 5.5 },\n    { note: 'B', idx: 6 },\n  ]);\n\n  const setOscillator = (newType: Tone.ToneOscillatorType) => {\n    setSynth(oldSynth => {\n      oldSynth.disconnect();\n\n      return new Tone.Synth({\n        oscillator: { type: newType } as Tone.OmniOscillatorOptions,\n      }).toDestination();\n    });\n  };\n\n\n  \n\n  const oscillators: List<OscillatorType> = List([\n    'sine',\n    'sawtooth',\n    'square',\n    'triangle',\n    'fmsine',\n    'fmsawtooth',\n    'fmtriangle',\n    'amsine',\n    'amsawtooth',\n    'amtriangle',\n  ]) as List<OscillatorType>;\n\n  return (\n    <div className=\"pv4\">\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(2, 7).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave}`;\n            return (\n              <PianoKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave}\n                index={(octave - 2) * 7 + key.idx}\n                state={state}\n                dispatch={dispatch}\n              />\n            );\n          }),\n        )}\n      </div>\n      <div className={'pl4 pt4 flex'}>\n        {oscillators.map(o => (\n          <PianoType\n            key={o}\n            title={o}\n            onClick={() => setOscillator(o)}\n            active={synth?.oscillator.type === o}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport const PianoInstrument = new Instrument('Piano', Piano);\n","\n   // 3rd party library imports\nimport * as Tone from 'tone';\nimport { List } from 'immutable';\nimport React from 'react';\nimport \"../css/ukulele.css\";\n\n// project imports\nimport { Instrument, InstrumentProps } from '../Instruments';\nimport { DispatchAction } from '../Reducer';\nimport { AppState } from '../State';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Piano.\n ** ------------------------------------------------------------------------ */\n\ninterface UkuleleFretProps {\n  note: string; // C, Db, D, Eb, E, F, Gb, G, Ab, A, Bb, B\n  duration?: string;\n  synth?: Tone.Synth; // Contains library code for making sound\n  minor?: boolean; // True if minor key, false if major key\n  index: number; // octave + index together give a location for the piano key\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n}\n\nexport function UkuleleFret({\n  note,\n  synth,\n  index,\n  state, \n  dispatch\n}: UkuleleFretProps): JSX.Element {\n  /**\n   * This React component corresponds to either a major or minor key in the piano.\n   * See `PianoKeyWithoutJSX` for the React component without JSX.\n   */\n  return (\n    // Observations:\n    // 1. The JSX refers to the HTML-looking syntax within TypeScript.\n    // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n    // 3. The curly braces `{` and `}` should remind you of string interpolation.\n    <div \n      className=\"ukulele-fret\"\n      onMouseDown={() => {\n        console.log(note);\n        synth?.triggerAttack(`${note}`);\n\n        // only add the note into a new song if recording button has been clicked\n        if(state.get('isRecording')) {\n          dispatch(new DispatchAction('ADD_NOTE_TO_SONG', {\n            note: note\n          }));\n        }\n      }}\n      onMouseUp={() => synth?.triggerRelease('+0.25')}\n    >\n    </div>\n  );\n}\n\nfunction Ukulele({ state, dispatch, synth, setSynth }: InstrumentProps): JSX.Element {\n\n  const standard_tuning_1frets = List([\n    // strings \n    [{ note: 'G', octave: 4, idx: 49}, { note: 'C', octave: 4, idx: 50}, { note: 'E', octave: 4, idx: 51}, { note: 'A', octave: 4, idx: 52}],\n    // 1 - 4th frets\n    [{ note: 'Ab', octave: 5, idx: 0 }, { note: 'Db', octave: 5, idx: 1 }, { note: 'F', octave: 5, idx: 2 }, { note: 'Bb', octave: 5, idx: 3 }],\n    [{ note: 'A', octave: 5, idx: 4 }, { note: 'D', octave: 5, idx: 5 }, { note: 'Gb', octave: 5, idx: 6 }, { note: 'B', octave: 5, idx: 7 }],\n    [{ note: 'Bb', octave: 5, idx: 8 }, { note: 'Eb', octave: 5, idx: 9 }, { note: 'G', octave: 5, idx: 10 }, { note: 'C', octave: 6, idx: 11 }],\n    [{ note: 'B', octave: 5, idx: 12}, { note: 'E', octave: 5, idx: 13}, { note: 'Ab', octave: 5, idx: 14}, { note: 'Db', octave: 6, idx: 15}],\n    // 5th fret\n    [{ note: 'C', octave: 6, idx: 16}, { note: 'F', octave: 5, idx: 17}, { note: 'A', octave: 5, idx: 18}, { note: 'D', octave: 6, idx: 19}],\n    [{ note: 'Db', octave: 6, idx: 20}, { note: 'Gb', octave: 5, idx: 21}, { note: 'Bb', octave: 5, idx: 22}, { note: 'Eb', octave: 6, idx: 23}],\n    // 7th fret\n    [{ note: 'D', octave: 6, idx: 24}, { note: 'G', octave: 5, idx: 25}, { note: 'B', octave: 5, idx: 26}, { note: 'E', octave: 6, idx: 27}],\n    [{ note: 'Eb', octave: 6, idx: 28}, { note: 'Ab', octave: 5, idx: 29}, { note: 'C', octave: 6, idx: 30}, { note: 'F', octave: 6, idx: 31}],\n    [{ note: 'E', octave: 6, idx: 32}, { note: 'A', octave: 5, idx: 33}, { note: 'Db', octave: 6, idx: 34}, { note: 'Gb', octave: 6, idx: 35}],\n    // 10th fret\n    [{ note: 'F', octave: 6, idx: 36}, { note: 'Bb', octave: 5, idx: 37}, { note: 'D', octave: 6, idx: 38}, { note: 'G', octave: 6, idx: 39}],\n    [{ note: 'Gb', octave: 6, idx: 40}, { note: 'B', octave: 5, idx: 42}, { note: 'Eb', octave: 6, idx: 43}, { note: 'Ab', octave: 6, idx: 44}],\n    [{ note: 'G', octave: 6, idx: 45}, { note: 'C', octave: 6, idx: 46}, { note: 'E', octave: 6, idx: 47}, { note: 'A', octave: 6, idx: 48}]\n  ]);\n\n  /*const standard_tuning_2frets = List([\n    [{ note: 'Eb', octave: 3, idx: 0 }, { note: 'Ab', octave: 3, idx: 1 }, { note: 'C', octave: 3, idx: 2 }, { note: 'F', octave: 3, idx: 3 }],\n    [{ note: 'E', octave: 5, idx: 4 }, { note: 'A', octave: 5, idx: 5 }, { note: 'Db', octave: 5, idx: 6 }, { note: 'Gb', octave: 5, idx: 7 }],\n    [{ note: 'F', octave: 5, idx: 8 }, { note: 'Bb', octave: 5, idx: 9 }, { note: 'D', octave: 5, idx: 10 }, { note: 'G', octave: 5, idx: 11 }],\n    [{ note: 'Gb', octave: 5, idx: 12}, { note: 'B', octave: 5, idx: 13}, { note: 'Eb', octave: 5, idx: 14}, { note: 'Ab', octave: 5, idx: 15}],\n    [{ note: 'G', octave: 5, idx: 16}, { note: 'C', octave: 5, idx: 17}, { note: 'E', octave: 5, idx: 18}, { note: 'A', octave: 5, idx: 19}],\n    [{ note: 'Ab', octave: 5, idx: 20}, { note: 'Db', octave: 5, idx: 21}, { note: 'F', octave: 5, idx: 22}, { note: 'Bb', octave: 5, idx: 23}],\n    [{ note: 'A', octave: 5, idx: 24}, { note: 'D', octave: 5, idx: 25}, { note: 'Gb', octave: 5, idx: 26}, { note: 'B', octave: 5, idx: 27}],\n    [{ note: 'Bb', octave: 5, idx: 28}, { note: 'Eb', octave: 5, idx: 29}, { note: 'G', octave: 5, idx: 30}, { note: 'C', octave: 5, idx: 31}],\n    [{ note: 'B', octave: 5, idx: 32}, { note: 'E', octave: 5, idx: 33}, { note: 'Ab', octave: 5, idx: 34}, { note: 'Db', octave: 5, idx: 35}],\n    [{ note: 'C', octave: 5, idx: 36}, { note: 'F', octave: 5, idx: 37}, { note: 'A', octave: 5, idx: 38}, { note: 'D', octave: 5, idx: 39}],\n    [{ note: 'Db', octave: 5, idx: 40}, { note: 'Gb', octave: 5, idx: 42}, { note: 'Bb', octave: 5, idx: 43}, { note: 'Eb', octave: 5, idx: 44}],\n    [{ note: 'D', octave: 5, idx: 45}, { note: 'G', octave: 5, idx: 46}, { note: 'B', octave: 5, idx: 47}, { note: 'E', octave: 5, idx: 48}]\n  ]);*/\n\n  /*const setOscillator = (newType: Tone.ToneOscillatorType) => {\n    setSynth(oldSynth => {\n      oldSynth.disconnect();\n\n      return new Tone.Synth({\n        oscillator: { type: newType } as Tone.OmniOscillatorOptions,\n      }).toDestination();\n    });\n  };*/\n\n  return (\n    <div className=\"pv4\">\n      <div className=\"relative dib h4 w-50\">\n        <div className=\"ukulele\">\n          {standard_tuning_1frets.map((fret, idx) => {\n            const marker = (idx === 5 || idx === 7 || idx === 10) ? true : false;\n            \n            return (\n              <div className={idx === 0 ? \"fret-strings\" : \"fret\"}>\n                {marker && <span className=\"fret-marker\"></span>}\n                \n                {fret.map(aFret => {\n                    const note = `${aFret.note}${aFret.octave}`;\n\n                    return (\n                      <UkuleleFret \n                        note={note}\n                        synth={synth}\n                        index={idx}\n                        state={state}\n                        dispatch={dispatch}\n                      />\n                    );\n                  })}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport const mitchthebakerInstrument = new Instrument('mitchthebaker', Ukulele);","// 3rd party library imports\nimport * as Tone from 'tone';\nimport classNames from 'classnames';\nimport { List, Range } from 'immutable';\nimport React from 'react';\n\n// project imports\nimport { Instrument, InstrumentProps } from '../Instruments';\nimport { DispatchAction } from '../Reducer';\nimport { AppState } from '../State';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Piano.\n ** ------------------------------------------------------------------------ */\n\ninterface KulimbaKeyProps {\n  note: string; // C, Db, D, Eb, E, F, Gb, G, Ab, A, Bb, B\n  duration?: string;\n  synth?: Tone.Synth; // Contains library code for making sound\n  minor?: boolean; // True if minor key, false if major key\n  identity: string; \n  octave: number;\n  index: number; // octave + index together give a location for the piano key\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n}\n\nconst Polysynth = new Tone.PolySynth().toDestination();\n\n\nPolysynth.set({\n  detune: -1200\n})\n\n\nexport function PianoKey({\n  note,\n  // synth,\n  // minor,\n  // index,\n  identity,\n  state,\n  dispatch\n}: KulimbaKeyProps): JSX.Element {\n  /**\n   * This React component corresponds to either a major or minor key in the piano.\n   * See `PianoKeyWithoutJSX` for the React component without JSX.\n   */\n\n  \n  return (\n    // Observations:\n    // 1. The JSX refers to the HTML-looking syntax within TypeScript.\n    // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n    // 3. The curly braces `{` and `}` should remind you of string interpolation.\n    // <div\n    //   onMouseDown={() => synth?.triggerAttack(`${note}`)} // Question: what is `onMouseDown`?\n    //   onMouseUp={() => synth?.triggerRelease('+0.25')} // Question: what is `onMouseUp`?\n    //   className={classNames('ba pointer absolute dim', {\n    //     'bg-black black h3': minor, // minor keys are black\n    //     'black bg-white h4': !minor, // major keys are white\n    //   })}\n    //   style={{\n    //     // CSS\n    //     top: 0,\n    //     left: `${index * 2}rem`,\n    //     zIndex: minor ? 1 : 0,\n    //     width: minor ? '1.5rem' : '2rem',\n    //     marginLeft: minor ? '0.25rem' : 0,\n    //   }}\n    // ></div>\n    <div>\n      <button \n        onMouseDown={() => {\n          Polysynth?.triggerAttack(`${note}`);\n\n          // only add the note into a new song if recording button has been clicked\n          if(state.get('isRecording')) {\n            dispatch(new DispatchAction('ADD_NOTE_TO_SONG', {\n              note: note\n            }));\n          }\n        }} \n        onMouseUp={() => Polysynth?.triggerRelease(`${note}`,'+0.19')}\n        style={{\n              // CSS\n              // top: 0,\n              // left: `${index * 2}rem`,\n              // zIndex: minor ? 1 : 0,\n              // width: minor ? '1.5rem' : '2rem',\n              // marginLeft: minor ? '0.25rem' : 0,\n        }}>{identity}</button>\n    </div>\n  );\n}\n\n// eslint-disable-next-line\nfunction PianoKeyWithoutJSX({\n  note,\n  synth,\n  minor,\n  index,\n}: KulimbaKeyProps): JSX.Element {\n  /**\n   * This React component for pedagogical purposes.\n   * See `PianoKey` for the React component with JSX (JavaScript XML).\n   */\n  return React.createElement(\n    'div',\n    {\n      onMouseDown: () => synth?.triggerAttack(`${note}`),\n      onMouseUp: () => synth?.triggerRelease('+0.25'),\n      className: classNames('ba pointer absolute dim', {\n        'bg-black black h3': minor,\n        'black bg-white h4': !minor,\n      }),\n      style: {\n        top: 0,\n        left: `${index * 2}rem`,\n        zIndex: minor ? 1 : 0,\n        width: minor ? '1.5rem' : '2rem',\n        marginLeft: minor ? '0.25rem' : 0,\n      },\n    },\n    [],\n  );\n}\n\n/*function PianoType({ title, onClick, active }: any): JSX.Element {\n  return (\n    <div\n      onClick={onClick}\n      className={classNames('dim pointer ph2 pv1 ba mr2 br1 fw7 bw1', {\n        'b--black black': active,\n        'gray b--light-gray': !active,\n      })}\n    >\n      {title}\n    </div>\n  );\n}*/\n\nfunction Kalimba({ state, dispatch, synth }: InstrumentProps): JSX.Element {\n  const keys = List([\n    { note: \"G5\", idx: 0 },\n    { note: \"F5\", idx: 0.5 },\n    { note: \"E5\", idx: 1 },\n    { note: \"D5\", idx: 1.5 },\n    { note: \"B4\", idx: 2 },\n    { note: \"C5\", idx: 0 },\n    { note: \"D5\", idx: 0.5 },\n    { note: \"E5\", idx: 1 },\n    { note: \"F5\", idx: 1.5 },\n    // { note: 'E', idx: 2 },\n    // { note: 'F', idx: 3 },\n    // { note: 'Gb', idx: 3.5 },\n    // { note: 'G', idx: 4 },\n    // { note: 'Ab', idx: 4.5 },\n    // { note: 'A', idx: 5 },\n    // { note: 'Bb', idx: 5.5 },\n    // { note: 'B', idx: 6 },\n  ]);\n\n\n  // const setOscillator = (newType: Tone.ToneOscillatorType) => {\n  //   setSynth(oldSynth => {\n  //     oldSynth.disconnect();\n\n  //     return new Tone.Synth({\n  //       //oscillator: { type: newType } as Tone.OmniOscillatorOptions,\n        \n  //     }).toDestination();\n\n\n  //   });\n  // };\n\n  /*const oscillators: List<OscillatorType> = List([\n    'sine',\n    'sawtooth',\n    'square',\n    'triangle',\n    'fmsine',\n    'fmsawtooth',\n    'fmtriangle',\n    'amsine',\n    'amsawtooth',\n    'amtriangle',\n  ]) as List<OscillatorType>;*/\n\n  return (\n    <div className=\"pv5\">\n      <div className={'pl4 pt4 flex'}>\n        {/* {oscillators.map(o => (\n          <PianoType\n            key={o}\n            title={o}\n            onClick={() => setOscillator(o)}\n            active={synth?.oscillator.type === o}\n          />\n        ))} */}\n      </div>\n      <div className=\"Kalimba_main\">\n        <div style={{backgroundImage: 'url(\"https://cdn-icons-png.flaticon.com/512/3100/3100511.png\")', backgroundRepeat: 'no-repeat', right: '50px'}}>\n          <div style={{height: '500px', width: '320px'}}>\n            <div className=\"keys\" style={{margin: 'auto', width: '60%', padding: '30px', display: \"flex\"}}>\n\n             \n              {Range(1, 2).map(octave =>\n                keys.map(key => {\n                  const note = `${key.note}`;\n                  return (\n                    <PianoKey\n                      key={note} //react key\n                      note={note}\n                      synth={synth}\n                      octave={octave}\n                      identity={key.note}\n                      index={(octave - 2) * 7 + key.idx}\n                      state={state}\n                      dispatch={dispatch}\n                    />\n                  );\n                })\n              )} \n\n            </div> \n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport const KalimbaInstrument = new Instrument('kennethchuson2', Kalimba);\n\n\n","// 3rd party library imports\nimport * as Tone from 'tone';\nimport classNames from 'classnames';\nimport { List } from 'immutable';\nimport React from 'react';\n\n// project imports\nimport { Instrument, InstrumentProps } from '../Instruments';\nimport { DispatchAction } from '../Reducer';\nimport { AppState } from '../State';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Piano.\n ** ------------------------------------------------------------------------ */\n\ninterface FluteKeyProps {\n  note: string; \n  duration?: string;\n  synth?: Tone.Synth; // Contains library code for making sound\n  minor?: boolean; // True if minor key, false if major key\n  index: number; // octave + index together give a location for the piano key\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n}\n\nconst Monosynth = new Tone.MonoSynth().toDestination();\n\nexport function FluteKey({\n  note,\n  minor,\n  index,\n  state,\n  dispatch\n}: FluteKeyProps): JSX.Element {\n  /**\n   * This React component corresponds to either a major or minor key in the piano.\n   * See `PianoKeyWithoutJSX` for the React component without JSX.\n   */\n  return (\n    // Observations:\n    // 1. The JSX refers to the HTML-looking syntax within TypeScript.\n    // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n    // 3. The curly braces `{` and `}` should remind you of string interpolation.\n    <div\n      onMouseDown={() => {\n        Monosynth?.triggerAttack(`${note}`);\n\n        // only add the note into a new song if recording button has been clicked\n        if(state.get('isRecording')) {\n          dispatch(new DispatchAction('ADD_NOTE_TO_SONG', {\n            note: note\n          }));\n        }\n      }} // Question: what is `onMouseDown`?\n      onMouseUp={() => Monosynth?.triggerRelease('+0.32')} // Question: what is `onMouseUp`?\n      className={classNames('ba pointer absolute dim', {\n        'black bg-white h4': !minor, // major keys are white\n      })}\n      style={{\n        // CSS\n        top: 6,\n        left: `${index * 5}rem`,\n        zIndex: minor ? 4 : 2,\n        width: minor ? '2rem' : '5rem',\n        height: minor ? '2rem' : '5rem',\n        borderRadius: 88/2,\n        marginLeft: minor ? '0.25rem' : 25,\n      }}\n    >\n   </div>\n  );\n}\n\nfunction Flute({ state, dispatch, synth }: InstrumentProps): JSX.Element {\n\n  const flute = List([\n    [{ note: 'Ab', octave: 6, idx: 9 }, \n    { note: 'Db', octave: 6, idx: 1 }, \n    { note: 'F', octave: 6, idx: 2 }, \n    { note: 'Bb', octave: 4, idx: 3 }],\n    [{ note: 'A', octave: 4, idx: 4 }, \n    { note: 'D', octave: 4, idx: 5 }, \n    { note: 'Gb', octave: 6, idx: 6 }, \n    { note: 'B', octave: 6, idx: 7 }],\n    [{ note: 'Bb', octave: 6, idx: 8 }, \n    { note: 'Eb', octave: 6, idx: 9 }, \n    // { note: 'G', octave: 4, idx: 10 }, \n    // { note: 'C', octave: 4, idx: 11 }\n  ]\n  ]);\n\n  return (\n    <div className=\"pv4\">\n      <div className=\"relative dib h4 w-50\">\n        <div className=\"flute\">\n          {flute.map(blow => (\n              <div className=\"blow\">\n                {blow.map(blow => {\n                  const note = `${blow.note}${blow.octave}`;\n                  return (\n                    <FluteKey \n                      note={note}\n                      synth={synth}\n                      index={blow.idx}\n                      state={state}\n                      dispatch={dispatch}\n                    />\n                  );\n                })}\n              </div>\n            ))\n          }\n          <img\n     src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Pan_flute.svg/868px-Pan_flute.svg.png\"\n     alt=\"Pan\"\n     style={{\n       margin: \"10px\",\n       width: \"650px\",\n       borderRadius: \"30px\",\n       objectFit: \"scale-down\",\n       marginBottom: \"15px\",\n       alignSelf: 'center'\n       \n     }}\n   />\n        </div> \n        <div className={'pl4 pt4 flex'}>\n          </div>\n      </div>   \n      </div> \n  );\n}\n\nexport const FluteInstrument = new Instrument('schrodobaggins', Flute);","// 3rd party library imports\nimport P5 from 'p5';\nimport * as Tone from 'tone';\n\n// project imports\nimport { Visualizer } from '../Visualizers';\n\n\nexport const WaveformVisualizer = new Visualizer(\n  'Waveform',\n  (p5: P5, analyzer: Tone.Analyser) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n    const dim = Math.min(width, height);\n\n    p5.background(0, 0, 0, 255);\n\n    p5.strokeWeight(dim * 0.01);\n    p5.stroke(255, 255, 255, 255);\n    p5.noFill();\n\n    const values = analyzer.getValue();\n    p5.beginShape();\n    for (let i = 0; i < values.length; i++) {\n      const amplitude = values[i] as number;\n      const x = p5.map(i, 0, values.length - 1, 0, width);\n      const y = height / 2 + amplitude * height;\n      // Place vertexi\n      p5.vertex(x, y);\n    }\n    p5.endShape();\n  },\n);","// 3rd party library imports\nimport P5 from 'p5';\nimport * as Tone from 'tone';\n\n// project imports\nimport { Visualizer } from '../Visualizers';\n\nconst particles: Particle[] = [];\n\nclass Particle {\n\n  public position;\n  public velocity;\n  public acc;\n  public w; \n  public color: any[];\n\n  constructor(p5: P5) {\n    this.position = Object.getPrototypeOf(p5).constructor.Vector.random2D().mult(250);\n    this.velocity = p5.createVector(0, 0);\n    this.acc = this.position.copy().mult(p5.random(0.001, 0.0001));\n    this.w = p5.random(3, 5);\n    this.color = [p5.random(200, 255), p5.random(200, 255), p5.random(200, 255)];\n  }\n\n  update(): void {\n    this.velocity.add(this.acc);\n    this.position.add(this.velocity);\n  }\n\n  edges(width: number, height: number): boolean {\n    if(this.position.x < -width / 2 || this.position.x > width / 2\n        || this.position.y < -height / 2 || this.position.y > height / 2) {\n          return true;\n        }\n    else {\n      return false;\n    }\n  }\n\n  show(p5: P5): void {\n    p5.noStroke()\n    p5.fill(this.color);\n    p5.ellipse(this.position.x, this.position.y, this.w);\n  }\n}\n\nexport const mitchthebakerVisualizer = new Visualizer(\n  'mitchthebaker',\n  (p5: P5, analyzer: Tone.Analyser) => {\n    const width = window.innerWidth / 2;\n    const height = window.innerHeight;\n\n    p5.background(0);\n    p5.stroke(255);\n    p5.strokeWeight(3);\n    p5.noFill();\n    p5.translate(width / 2, height / 2);\n    \n    const wave = analyzer.getValue();\n\n    for(let t = -1; t <= 1; t += 2) {\n      p5.beginShape();\n\n      // Use 180 since this is equal to the radius of a circle\n      for(let i = 0; i <= 180; i += 0.5) {\n        let index = Math.floor(p5.map(i, 0, 180, 0, wave.length - 1));\n        //console.log(values[index]);\n\n        let r = p5.map(Number(wave[index]), -1, 1, 150, 350);\n\n        let x = r * p5.sin(i) * t;\n        let y = r * p5.cos(i);\n        p5.vertex(x, y);\n      }\n\n      p5.endShape();\n    }\n\n    let p: Particle = new Particle(p5);\n    particles.push(p);\n\n    for(let i = particles.length - 1; i >= 0; i--) {\n      if(!particles[i].edges(width, height)) {\n        particles[i].update();\n        particles[i].show(p5);\n      }\n      else {\n        particles.splice(i, 1);\n      }\n    }\n  },\n);\n","// 3rd party library imports\nimport P5 from 'p5';\nimport * as Tone from 'tone';\n\n// project imports\nimport { Visualizer } from '../Visualizers';\n\nexport const KennethVisualizer = new Visualizer(\n  'kennethchuson2',\n  (p5: P5, analyzer: Tone.Analyser) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n    const dim = Math.min(width, height);\n\n    let arr_colors:string[] = ['rgb(0,255,0)', 'rgb(195,4,4)', 'rgb(42,13,191)', 'rgba(0,234,242)']\n\n    p5.background('#4F1B77');\n\n    p5.strokeWeight(dim * 0.03);\n    //p5.stroke(255, 204, 100);\n    //p5.noFill();\n\n    for (let i = arr_colors.length - 1; i > 0; i--) {\n      let random = Math.floor(Math.random() * (i + 1))\n      let temp = arr_colors[i] \n      arr_colors[i] = arr_colors[random]\n      arr_colors[random] = temp \n      p5.stroke(arr_colors[i])\n    }\n\n\n    const values = analyzer.getValue();\n\n\n    p5.translate(width / 2, height / 2) \n    p5.beginShape();\n    for (let i = 0; i < values.length; i++) {\n      const r = values[i] as number\n\n      const x = r * Math.cos(i) * width / 1.150\n      const y = r * Math.sin(i) * height / 1.150\n      // Place vertex\n      p5.point(x, y);\n    }\n    p5.endShape();\n  },\n);\n","// 3rd party library imports\nimport P5 from 'p5';\nimport * as Tone from 'tone';\n\n// project imports\nimport { Visualizer } from '../Visualizers';\n\nvar mapMax = 1.0;\n//var amplitude;\n\nexport const MichaelWaveformVisualizer = new Visualizer(\n  'Schrodobaggins',\n  (p5: P5, analyzer: Tone.Analyser) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n\n    //amplitude = new p5.Amplitude();\n    p5.background(0);\n    p5.fill(255);\n    p5.noStroke();\n    //p5.Amplitude();\n\n    \n    const values = analyzer.getValue();\n    p5.text('Amplitude: ' + values, 30, 65);\n    p5.text('mapMax: ' + mapMax, 30, 80);\n    p5.beginShape();\n    for (let i = 0; i < values.length; i++) {\n        const amplitude = values[i] as number;\n        //var level = amplitude.getLevel();\n\n        // map ellipse height\n        var ellipseHeight = p5.map(amplitude * 1.25, 0.50, values.length / 50, height, width);\n        p5.ellipse(width / 2, ellipseHeight, 50, 50);\n    }\n    p5.endShape();\n},\n);\n\n\n","// 3rd party\nimport { List, Map } from 'immutable';\n\n// project dependencies\nimport { PianoInstrument } from './instruments/Piano';\nimport { mitchthebakerInstrument } from './instruments/mitchthebaker';\nimport { KalimbaInstrument } from './instruments/kennethchuson2';\nimport { FluteInstrument } from './instruments/schrodobaggins';\n\nimport { WaveformVisualizer } from './visualizers/Waveform';\nimport { mitchthebakerVisualizer } from './visualizers/mitchthebaker';\nimport { KennethVisualizer } from './visualizers/kennethchuson2'\nimport { MichaelWaveformVisualizer } from './visualizers/MichaelWaveform';\n//import { Kalimba } from './instruments/Kalimba'\n\n/** ------------------------------------------------------------------------ **\n * The entire application state is stored in AppState.\n ** ------------------------------------------------------------------------ */\n\n/**\n * Observation: pure map (compare and contrast with impure map)\n *\n * 'instrument': Instrument\n * 'visualizer': Visualizer\n */\nexport type AppState = Map<string, any>;\n\nconst instruments = List([PianoInstrument, mitchthebakerInstrument, KalimbaInstrument, FluteInstrument]);\nconst visualizers = List([WaveformVisualizer, mitchthebakerVisualizer, KennethVisualizer, MichaelWaveformVisualizer]);\nexport const defaultState: AppState = Map<string, any>({\n  instruments,\n  visualizers,\n  isRecording: false,\n  openPopup: false,\n  songTitle: '',\n});\n","import { io as newSocket, Socket as SocketIO } from 'socket.io-client';\n\nconst SOCKET_URL = 'ws://localhost:3001';\n\nconst SOCKET_OPTS = {\n  transports: ['websocket'],\n  path: '/ws',\n  autoConnect: true,\n  reconnection: true,\n  timeout: 10000,\n};\n\nlet idCounter = 1;\n\nexport async function send(\n  socket: Socket,\n  name: string,\n  msg: any,\n): Promise<any> {\n  const _id = idCounter++;\n\n  return new Promise((resolve, reject) => {\n    socket.once(`${name}.${_id}`, resp => {\n      const { error, ...success } = resp;\n      if (success) {\n        resolve(success);\n      } else {\n        reject(error);\n      }\n    });\n    socket.emit(name, { _id, ...msg });\n  });\n}\n\n\nexport type Socket = SocketIO;\n\nexport function initializeSocket(\n  onConnect: (socket: Socket) => void,\n  onDisconnect: () => void,\n): Socket {\n  const socket = newSocket(SOCKET_URL, SOCKET_OPTS);\n\n  socket.on('connect', () => onConnect(socket));\n  socket.on('disconnect', onDisconnect);\n\n  return socket;\n}\n","// 3rd party library imports\nimport { useReducer, useEffect } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\n// project imports\nimport { MainPage } from './MainPage';\nimport { DispatchAction, appReducer } from './Reducer';\nimport { defaultState } from './State';\nimport { initializeSocket, send } from './Socket';\n\n// css imports\nimport 'animate.css';\n\n/** ------------------------------------------------------------------------ **\n * App component\n ** ------------------------------------------------------------------------ */\n\nfunction App() {\n  const [state, dispatch] = useReducer(appReducer, defaultState);\n\n  useEffect(() => {\n    initializeSocket(\n      async socket => {\n        dispatch(new DispatchAction('SET_SOCKET', { socket }));\n        const { songs } = await send(socket, 'get_songs', {});\n        dispatch(new DispatchAction('SET_SONGS', { songs }));\n      },\n      () => {\n        dispatch(new DispatchAction('DELETE_SOCKET'));\n      },\n    );\n  }, []);\n\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\">\n          <MainPage state={state} dispatch={dispatch} />\n        </Route>\n        <Route path=\"/:instrument\">\n          <MainPage state={state} dispatch={dispatch} />\n        </Route>\n        <Route path=\"*\">\n          <div>404</div>\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","// 3rd party library imports\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// project imports\nimport App from './App';\n\n// CSS\nimport './index.css';\nimport './tachyons.css';\n\n\n/** ------------------------------------------------------------------------ **\n * Entry point.\n ** ------------------------------------------------------------------------ */\n\nfunction onReactLoaded() {\n  console.log('React has loaded.');\n}\n\nconst rootEl = document.getElementById('root');\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootEl,  // Insert into DOM here\n  onReactLoaded,\n);\n"],"sourceRoot":""}